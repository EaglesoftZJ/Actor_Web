{"version":3,"sources":["../../src/stores/QuickSearchStore.js"],"names":["QuickSearchStore","getInitialState","user","group","list","getSearchList","getState","reduce","state","action","type","QUICK_SEARCH_CHANGED_USER","from","orderBy","toArray","concat","setTimeout","setPingyinSearchList","QUICK_SEARCH_CHANGED_GROUP"],"mappings":";;;;;;AAIA;;AACA;;;;AACA;;AACA;;;;AACA;;;;;;;;;;+eARA;;;;IAUMA,gB;;;;;;;;;6BACJC,e,8BAAkB;AAChB,WAAO;AACLC,YAAM,EADD,EACK;AACVC,aAAO,EAFF,EAEM;AACXC,YAAM,EAHD,CAGI;AAHJ,KAAP;AAKD,G;;6BAEDC,a,4BAAgB;AACd,WAAO,KAAKC,QAAL,GAAgBF,IAAvB;AACD,G;;6BAEDG,M,mBAAOC,K,EAAOC,M,EAAQ;AACpB,YAAQA,OAAOC,IAAf;AACE,WAAK,+BAAYC,yBAAjB;AACE,YAAIT,OAAO,eAAKU,IAAL,CAAUH,OAAOL,IAAjB,EAAuBS,OAAvB,CAA+B,qBAA/B,EAAsDC,OAAtD,EAAX;AACA,YAAIV,OAAOI,MAAML,KAAN,CAAYY,MAAZ,CAAmBb,IAAnB,CAAX;AACAc,mBAAW,YAAM;AACf,gDAA4BC,oBAA5B,CAAiDb,IAAjD;AACD,SAFD,EAEG,CAFH;AAGA,4BACKI,KADL;AAEEN,oBAFF;AAGEE;AAHF;AAKF,WAAK,+BAAYc,0BAAjB;AACE,YAAIf,QAAQ,eAAKS,IAAL,CAAUH,OAAOL,IAAjB,EAAuBS,OAAvB,CAA+B,qBAA/B,EAAsDC,OAAtD,EAAZ;AACA,YAAIV,OAAOI,MAAMN,IAAN,CAAWa,MAAX,CAAkBZ,KAAlB,CAAX;AACAa,mBAAW,YAAM;AACf,gDAA4BC,oBAA5B,CAAiDb,IAAjD;AACD,SAFD,EAEG,CAFH;AAGA,4BACKI,KADL;AAEEL,sBAFF;AAGEC;AAHF;AAKF;AACE,eAAOI,KAAP;AAxBJ;AA0BD,G;;;;;kBAGY,IAAIR,gBAAJ,8B","file":"QuickSearchStore.js","sourcesContent":["/*\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\n */\n\nimport { ReduceStore } from 'flux/utils';\nimport Dispatcher from '../dispatcher/ActorAppDispatcher';\nimport { ActionTypes } from '../constants/ActorAppConstants';\nimport PingyinSearchActionCreators from '../actions/PingyinSearchActionCreators';\nimport linq from 'Linq';\n\nclass QuickSearchStore extends ReduceStore {\n  getInitialState() {\n    return {\n      user: [], // 用户列表\n      group: [], // 群组列表\n      list: [] // 合集\n    }\n  }\n\n  getSearchList() {\n    return this.getState().list;\n  }\n\n  reduce(state, action) {\n    switch (action.type) {\n      case ActionTypes.QUICK_SEARCH_CHANGED_USER:\n        var user = linq.from(action.list).orderBy('$.peerInfo.userName').toArray();\n        var list = state.group.concat(user);\n        setTimeout(() => {\n          PingyinSearchActionCreators.setPingyinSearchList(list);\n        }, 1); \n        return {\n          ...state,\n          user,\n          list\n        };\n      case ActionTypes.QUICK_SEARCH_CHANGED_GROUP:\n        var group = linq.from(action.list).orderBy('$.peerInfo.userName').toArray();\n        var list = state.user.concat(group);\n        setTimeout(() => {\n          PingyinSearchActionCreators.setPingyinSearchList(list);\n        }, 1);\n        return {\n          ...state,\n          group,\n          list\n        };\n      default:\n        return state;\n    }\n  }\n}\n\nexport default new QuickSearchStore(Dispatcher);\n"]}