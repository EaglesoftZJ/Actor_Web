{"version":3,"sources":["../../src/stores/InviteUserStore.js"],"names":["InviteUserStore","getInitialState","name","search","step","members","selectedUserIds","OrderedSet","group","users","inviteUrl","reduce","state","action","type","DIALOG_INFO_CHANGED","info","INVITE_USER_MODAL_SHOW","INVITE_USER_MODAL_HIDE","NVITE_USER_SET_SEARCH","NVITE_USER_SET_MEMBERS","INVITE_USER_BY_LINK_MODAL_SHOW","url","INVITE_USER","uid","PROCESSING","INVITE_USER_SUCCESS","SUCCESS","INVITE_USER_ERROR","FAILURE","INVITE_USER_RESET","getGroup","getState","getInviteUrl","getInviteUserState"],"mappings":";;;;;;AAGA;;;;AACA;;AACA;;;;AACA;;;;;;;;+eANA;;;;;IAQMA,e;;;;;;;;;4BACJC,e,8BAAkB;AAAA;;AAChB;AACEC,YAAM,EADR;AAEEC,cAAQ,EAFV;AAGEC,YAAM,EAHR;AAIEC,eAAS;AAJX,sBAKQ,EALR,OAMEC,eANF,GAMmB,IAAI,oBAAUC,UAAd,EANnB,OAOEC,KAPF,GAOS,IAPT,OAQEC,KARF,GAQS,EART,OASEC,SATF,GASa,IATb;AAWD,G;;4BAEDC,M,mBAAOC,K,EAAOC,M,EAAQ;AACpB,YAAOA,OAAOC,IAAd;AACE,WAAK,+BAAYC,mBAAjB;AACE,4BACKH,KADL;AAEEP,mBAASQ,OAAOG,IAAP,CAAYX,OAFvB;AAGEH,gBAAMW,OAAOG,IAAP,CAAYd,IAHpB;AAIEM,iBAAOK,OAAOG;AAJhB;;AAOF,WAAK,+BAAYC,sBAAjB;AACE,4BACKL,KADL;AAEEP,mBAASQ,OAAOL,KAAP,CAAaH,OAFxB;AAGEH,gBAAMW,OAAOL,KAAP,CAAaN,IAHrB;AAIEM,iBAAOK,OAAOL;AAJhB;AAMF,WAAK,+BAAYU,sBAAjB;AACE,eAAO,KAAKjB,eAAL,EAAP;;AAEF,WAAK,+BAAYkB,qBAAjB;AACE,4BACKP,KADL;AAEET,kBAAQU,OAAOV;AAFjB;AAIF,WAAK,+BAAYiB,sBAAjB;AACA,4BACKR,KADL;AAEEN,2BAAiBO,OAAOP;AAF1B;;AAKA,WAAK,+BAAYe,8BAAjB;AACE,4BACKT,KADL;AAEEF,qBAAWG,OAAOS;AAFpB;;AAKF;AACA,WAAK,+BAAYC,WAAjB;AACEX,cAAMH,KAAN,CAAYI,OAAOW,GAAnB,IAA0B,qCAAkBC,UAA5C;AACA,4BACKb,KADL;AAEER,gBAAM,+BAAYmB;AAFpB;AAIF,WAAK,+BAAYG,mBAAjB;AACEd,cAAMH,KAAN,CAAYI,OAAOW,GAAnB,IAA0B,qCAAkBG,OAA5C;AACA,4BACKf,KADL;AAEER,gBAAM,+BAAYsB;AAFpB;AAIF,WAAK,+BAAYE,iBAAjB;AACEhB,cAAMH,KAAN,CAAYI,OAAOW,GAAnB,IAA0B,qCAAkBK,OAA5C;AACA,4BACKjB,KADL;AAEER,gBAAM,+BAAYwB;AAFpB;AAIF,WAAK,+BAAYE,iBAAjB;AACE,eAAOlB,MAAMH,KAAN,CAAYI,OAAOW,GAAnB,CAAP;AACA,4BACKZ,KADL;AAEER,gBAAM,+BAAY0B;AAFpB;AAIF;AACE,eAAOlB,KAAP;AA9DJ;AAgED,G;;4BAEDmB,Q,uBAAW;AACT,WAAO,KAAKC,QAAL,GAAgBxB,KAAvB;AACD,G;;4BAEDyB,Y,2BAAe;AACb,WAAO,KAAKD,QAAL,GAAgBtB,SAAvB;AACD,G;;4BAEDwB,kB,iCAAqB;AACnB,WAAO,KAAKF,QAAL,GAAgBvB,KAAvB;AACD,G;;;;;kBAGY,IAAIT,eAAJ,8B","file":"InviteUserStore.js","sourcesContent":["/*\r\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\r\n */\r\nimport Immutable from 'immutable';\r\nimport { ReduceStore } from 'flux/utils';\r\nimport Dispatcher from '../dispatcher/ActorAppDispatcher';\r\nimport { ActionTypes, AsyncActionStates } from '../constants/ActorAppConstants';\r\n\r\nclass InviteUserStore extends ReduceStore {\r\n  getInitialState() {\r\n    return {\r\n      name: '',\r\n      search: '',\r\n      step: '',\r\n      members: '',\r\n      step: '',\r\n      selectedUserIds: new Immutable.OrderedSet(),\r\n      group: null,\r\n      users: {},\r\n      inviteUrl: null\r\n    };\r\n  }\r\n\r\n  reduce(state, action) {\r\n    switch(action.type) {\r\n      case ActionTypes.DIALOG_INFO_CHANGED:\r\n        return {\r\n          ...state,\r\n          members: action.info.members,\r\n          name: action.info.name,\r\n          group: action.info\r\n        };\r\n\r\n      case ActionTypes.INVITE_USER_MODAL_SHOW:\r\n        return {\r\n          ...state,\r\n          members: action.group.members,\r\n          name: action.group.name,\r\n          group: action.group\r\n        };\r\n      case ActionTypes.INVITE_USER_MODAL_HIDE:\r\n        return this.getInitialState();\r\n\r\n      case ActionTypes.NVITE_USER_SET_SEARCH:\r\n        return {\r\n          ...state,\r\n          search: action.search\r\n      }\r\n      case ActionTypes.NVITE_USER_SET_MEMBERS:\r\n      return {\r\n        ...state,\r\n        selectedUserIds: action.selectedUserIds\r\n      }\r\n\r\n      case ActionTypes.INVITE_USER_BY_LINK_MODAL_SHOW:\r\n        return {\r\n          ...state,\r\n          inviteUrl: action.url\r\n        };\r\n\r\n      // Invite user\r\n      case ActionTypes.INVITE_USER:\r\n        state.users[action.uid] = AsyncActionStates.PROCESSING;\r\n        return {\r\n          ...state,\r\n          step: ActionTypes.INVITE_USER\r\n        };\r\n      case ActionTypes.INVITE_USER_SUCCESS:\r\n        state.users[action.uid] = AsyncActionStates.SUCCESS;\r\n        return {\r\n          ...state,\r\n          step: ActionTypes.INVITE_USER_SUCCESS\r\n        };\r\n      case ActionTypes.INVITE_USER_ERROR:\r\n        state.users[action.uid] = AsyncActionStates.FAILURE;\r\n        return {\r\n          ...state,\r\n          step: ActionTypes.INVITE_USER_ERROR\r\n        };\r\n      case ActionTypes.INVITE_USER_RESET:\r\n        delete state.users[action.uid];\r\n        return {\r\n          ...state,\r\n          step: ActionTypes.INVITE_USER_RESET\r\n        };\r\n      default:\r\n        return state;\r\n    }\r\n  }\r\n\r\n  getGroup() {\r\n    return this.getState().group;\r\n  }\r\n\r\n  getInviteUrl() {\r\n    return this.getState().inviteUrl;\r\n  }\r\n\r\n  getInviteUserState() {\r\n    return this.getState().users;\r\n  }\r\n}\r\n\r\nexport default new InviteUserStore(Dispatcher);\r\n"]}