{"version":3,"sources":["../../src/stores/InviteUserStore.js"],"names":["InviteUserStore","getInitialState","name","search","step","members","selectedUserIds","OrderedSet","group","users","inviteUrl","reduce","state","action","type","DIALOG_INFO_CHANGED","info","INVITE_USER_MODAL_SHOW","INVITE_USER_MODAL_HIDE","NVITE_USER_SET_SEARCH","NVITE_USER_SET_MEMBERS","INVITE_USER_BY_LINK_MODAL_SHOW","url","INVITE_USER","uid","PROCESSING","INVITE_USER_SUCCESS","SUCCESS","INVITE_USER_ERROR","FAILURE","INVITE_USER_RESET","getGroup","getState","getInviteUrl","getInviteUserState"],"mappings":";;;;;;AAGA;;;;AACA;;AACA;;;;AACA;;;;;;;;+eANA;;;;;IAQMA,e;;;;;;;;;4BACJC,e,8BAAkB;AAAA;;AAChB;AACEC,YAAM,EADR;AAEEC,cAAQ,EAFV;AAGEC,YAAM,EAHR;AAIEC,eAAS;AAJX,sBAKQ,EALR,OAMEC,eANF,GAMmB,IAAI,oBAAUC,UAAd,EANnB,OAOEC,KAPF,GAOS,IAPT,OAQEC,KARF,GAQS,EART,OASEC,SATF,GASa,IATb;AAWD,G;;4BAEDC,M,mBAAOC,K,EAAOC,M,EAAQ;AACpB,YAAOA,OAAOC,IAAd;AACE,WAAK,+BAAYC,mBAAjB;AACE,4BACKH,KADL;AAEEP,mBAASQ,OAAOG,IAAP,CAAYX,OAFvB;AAGEH,gBAAMW,OAAOG,IAAP,CAAYd,IAHpB;AAIEM,iBAAOK,OAAOG;AAJhB;;AAOF,WAAK,+BAAYC,sBAAjB;AACE,4BACKL,KADL;AAEEP,mBAASQ,OAAOL,KAAP,CAAaH,OAFxB;AAGEH,gBAAMW,OAAOL,KAAP,CAAaN,IAHrB;AAIEM,iBAAOK,OAAOL;AAJhB;AAMF,WAAK,+BAAYU,sBAAjB;AACE,eAAO,KAAKjB,eAAL,EAAP;;AAEF,WAAK,+BAAYkB,qBAAjB;AACE,4BACKP,KADL;AAEET,kBAAQU,OAAOV;AAFjB;AAIF,WAAK,+BAAYiB,sBAAjB;AACA,4BACKR,KADL;AAEEN,2BAAiBO,OAAOP;AAF1B;;AAKA,WAAK,+BAAYe,8BAAjB;AACE,4BACKT,KADL;AAEEF,qBAAWG,OAAOS;AAFpB;;AAKF;AACA,WAAK,+BAAYC,WAAjB;AACEX,cAAMH,KAAN,CAAYI,OAAOW,GAAnB,IAA0B,qCAAkBC,UAA5C;AACA,4BACKb,KADL;AAEER,gBAAM,+BAAYmB;AAFpB;AAIF,WAAK,+BAAYG,mBAAjB;AACEd,cAAMH,KAAN,CAAYI,OAAOW,GAAnB,IAA0B,qCAAkBG,OAA5C;AACA,4BACKf,KADL;AAEER,gBAAM,+BAAYsB;AAFpB;AAIF,WAAK,+BAAYE,iBAAjB;AACEhB,cAAMH,KAAN,CAAYI,OAAOW,GAAnB,IAA0B,qCAAkBK,OAA5C;AACA,4BACKjB,KADL;AAEER,gBAAM,+BAAYwB;AAFpB;AAIF,WAAK,+BAAYE,iBAAjB;AACE,eAAOlB,MAAMH,KAAN,CAAYI,OAAOW,GAAnB,CAAP;AACA,4BACKZ,KADL;AAEER,gBAAM,+BAAY0B;AAFpB;AAIF;AACE,eAAOlB,KAAP;AA9DJ;AAgED,G;;4BAEDmB,Q,uBAAW;AACT,WAAO,KAAKC,QAAL,GAAgBxB,KAAvB;AACD,G;;4BAEDyB,Y,2BAAe;AACb,WAAO,KAAKD,QAAL,GAAgBtB,SAAvB;AACD,G;;4BAEDwB,kB,iCAAqB;AACnB,WAAO,KAAKF,QAAL,GAAgBvB,KAAvB;AACD,G;;;;;kBAGY,IAAIT,eAAJ,8B","file":"InviteUserStore.js","sourcesContent":["/*\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\n */\nimport Immutable from 'immutable';\nimport { ReduceStore } from 'flux/utils';\nimport Dispatcher from '../dispatcher/ActorAppDispatcher';\nimport { ActionTypes, AsyncActionStates } from '../constants/ActorAppConstants';\n\nclass InviteUserStore extends ReduceStore {\n  getInitialState() {\n    return {\n      name: '',\n      search: '',\n      step: '',\n      members: '',\n      step: '',\n      selectedUserIds: new Immutable.OrderedSet(),\n      group: null,\n      users: {},\n      inviteUrl: null\n    };\n  }\n\n  reduce(state, action) {\n    switch(action.type) {\n      case ActionTypes.DIALOG_INFO_CHANGED:\n        return {\n          ...state,\n          members: action.info.members,\n          name: action.info.name,\n          group: action.info\n        };\n\n      case ActionTypes.INVITE_USER_MODAL_SHOW:\n        return {\n          ...state,\n          members: action.group.members,\n          name: action.group.name,\n          group: action.group\n        };\n      case ActionTypes.INVITE_USER_MODAL_HIDE:\n        return this.getInitialState();\n\n      case ActionTypes.NVITE_USER_SET_SEARCH:\n        return {\n          ...state,\n          search: action.search\n      }\n      case ActionTypes.NVITE_USER_SET_MEMBERS:\n      return {\n        ...state,\n        selectedUserIds: action.selectedUserIds\n      }\n\n      case ActionTypes.INVITE_USER_BY_LINK_MODAL_SHOW:\n        return {\n          ...state,\n          inviteUrl: action.url\n        };\n\n      // Invite user\n      case ActionTypes.INVITE_USER:\n        state.users[action.uid] = AsyncActionStates.PROCESSING;\n        return {\n          ...state,\n          step: ActionTypes.INVITE_USER\n        };\n      case ActionTypes.INVITE_USER_SUCCESS:\n        state.users[action.uid] = AsyncActionStates.SUCCESS;\n        return {\n          ...state,\n          step: ActionTypes.INVITE_USER_SUCCESS\n        };\n      case ActionTypes.INVITE_USER_ERROR:\n        state.users[action.uid] = AsyncActionStates.FAILURE;\n        return {\n          ...state,\n          step: ActionTypes.INVITE_USER_ERROR\n        };\n      case ActionTypes.INVITE_USER_RESET:\n        delete state.users[action.uid];\n        return {\n          ...state,\n          step: ActionTypes.INVITE_USER_RESET\n        };\n      default:\n        return state;\n    }\n  }\n\n  getGroup() {\n    return this.getState().group;\n  }\n\n  getInviteUrl() {\n    return this.getState().inviteUrl;\n  }\n\n  getInviteUserState() {\n    return this.getState().users;\n  }\n}\n\nexport default new InviteUserStore(Dispatcher);\n"]}