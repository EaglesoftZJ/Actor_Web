{"version":3,"sources":["../../src/stores/DialogInfoStore.js"],"names":["getPeer","peer","type","GROUP","getGroup","id","getUser","DialogInfoStore","getInitialState","__isStarted","reduce","state","action","SELECT_DIALOG_PEER","info","isStarted","DIALOG_INFO_CHANGED","MESSAGES_CHANGED","messages","length"],"mappings":";;;;;;AAIA;;AACA;;;;AACA;;AACA;;;;;;;;;;+eAPA;;;;AASA,SAASA,OAAT,CAAiBC,IAAjB,EAAuB;AACrB,MAAIA,KAAKC,IAAL,KAAc,6BAAUC,KAA5B,EAAmC;AACjC,WAAO,sBAAYC,QAAZ,CAAqBH,KAAKI,EAA1B,CAAP;AACD;;AAED,SAAO,sBAAYC,OAAZ,CAAoBL,KAAKI,EAAzB,CAAP;AACD;;IAEKE,e;;;;;;;;;4BACJC,e,8BAAkB;AAChB;AACA,SAAKC,WAAL,GAAmB,KAAnB;AACA,WAAO,IAAP;AACD,G;;4BAEDC,M,mBAAOC,K,EAAOC,M,EAAQ;AACpB,YAAQA,OAAOV,IAAf;AACE,WAAK,+BAAYW,kBAAjB;AACE,YAAMC,OAAOd,QAAQY,OAAOX,IAAf,CAAb;;AAEA,4BACKa,IADL;AAEEC,qBAAW,KAAKN;AAFlB;;AAKF,WAAK,+BAAYO,mBAAjB;AACE,4BACKJ,OAAOE,IADZ;AAEEC,qBAAW,KAAKN;AAFlB;;AAKF,WAAK,+BAAYQ,gBAAjB;AACE,aAAKR,WAAL,GAAmBG,OAAOM,QAAP,IAAmBN,OAAOM,QAAP,CAAgBC,MAAhB,GAAyB,CAA/D;AACA,YAAIR,KAAJ,EAAW;AACT,8BACKA,KADL;AAEEI,uBAAW,KAAKN;AAFlB;AAID;;AAED,eAAOE,KAAP;;AAEF;AACE,eAAOA,KAAP;AA3BJ;AA6BD,G;;;;;kBAGY,IAAIJ,eAAJ,8B","file":"DialogInfoStore.js","sourcesContent":["/*\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\n */\n\nimport { ReduceStore } from 'flux/utils';\nimport Dispatcher from '../dispatcher/ActorAppDispatcher';\nimport { ActionTypes, PeerTypes } from '../constants/ActorAppConstants';\nimport ActorClient from '../utils/ActorClient';\n\nfunction getPeer(peer) {\n  if (peer.type === PeerTypes.GROUP) {\n    return ActorClient.getGroup(peer.id);\n  }\n\n  return ActorClient.getUser(peer.id);\n}\n\nclass DialogInfoStore extends ReduceStore {\n  getInitialState() {\n    // Temporary workaround while isStarted isn't correct\n    this.__isStarted = false;\n    return null;\n  }\n\n  reduce(state, action) {\n    switch (action.type) {\n      case ActionTypes.SELECT_DIALOG_PEER:\n        const info = getPeer(action.peer);\n\n        return {\n          ...info,\n          isStarted: this.__isStarted\n        };\n\n      case ActionTypes.DIALOG_INFO_CHANGED:\n        return {\n          ...action.info,\n          isStarted: this.__isStarted\n        };\n\n      case ActionTypes.MESSAGES_CHANGED:\n        this.__isStarted = action.messages && action.messages.length > 0;\n        if (state) {\n          return {\n            ...state,\n            isStarted: this.__isStarted\n          };\n        }\n\n        return state;\n\n      default:\n        return state;\n    }\n  }\n}\n\nexport default new DialogInfoStore(Dispatcher);\n"]}