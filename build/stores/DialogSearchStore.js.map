{"version":3,"sources":["../../src/stores/DialogSearchStore.js"],"names":["DialogSearchStore","getInitialState","isOpen","query","filter","text","docs","links","photos","result","status","SUCCESS","reduce","state","action","type","DIALOG_SEARCH_SHOW","BIND_DIALOG_PEER","DIALOG_SEARCH_HIDE","DIALOG_SEARCH_CHANGE_QUERY","DIALOG_SEARCH_TEXT_SUCCESS","set","response","DIALOG_SEARCH_DOCS_SUCCESS","DIALOG_SEARCH_LINKS_SUCCESS","DIALOG_SEARCH_PHOTO_SUCCESS"],"mappings":";;;;;;AAIA;;AACA;;AACA;;;;AACA;;;;;;;;+eAPA;;;;IASMA,iB;;;;;;;;;8BACJC,e,8BAAkB;AAChB,WAAO;AACLC,cAAQ,KADH;AAELC,aAAO,EAFF;AAGLC,cAAQ,mBAAQ;AACdC,cAAM,IADQ;AAEdC,cAAM,IAFQ;AAGdC,eAAO,IAHO;AAIdC,gBAAQ;AAJM,OAAR,CAHH;AASLC,cAAQ,mBAAQ;AACdJ,cAAM,EADQ;AAEdC,cAAM,EAFQ;AAGdC,eAAO,EAHO;AAIdC,gBAAQ;AAJM,OAAR,CATH;AAeLE,cAAQ,mBAAQ;AACdL,cAAM,qCAAkBM,OADV;AAEdL,cAAM,qCAAkBK,OAFV;AAGdJ,eAAO,qCAAkBI,OAHX;AAIdH,gBAAQ,qCAAkBG;AAJZ,OAAR;AAfH,KAAP;AAsBD,G;;8BAEDC,M,mBAAOC,K,EAAOC,M,EAAQ;AACpB,YAAQA,OAAOC,IAAf;AACE,WAAK,+BAAYC,kBAAjB;AACE,4BACKH,KADL;AAEEX,kBAAQ;AAFV;;AAKF,WAAK,+BAAYe,gBAAjB;AACA,WAAK,+BAAYC,kBAAjB;AACE,eAAO,KAAKjB,eAAL,EAAP;;AAEF,WAAK,+BAAYkB,0BAAjB;AACE,4BACKN,KADL;AAEEV,iBAAOW,OAAOX;AAFhB;;AAKF,WAAK,+BAAYiB,0BAAjB;AACE,4BACKP,KADL;AAEEJ,kBAAQI,MAAMJ,MAAN,CAAaY,GAAb,CAAiB,MAAjB,EAAyBP,OAAOQ,QAAhC,CAFV;AAGEZ,kBAAQG,MAAMJ,MAAN,CAAaY,GAAb,CAAiB,MAAjB,EAAyB,qCAAkBV,OAA3C;AAHV;;AAMF,WAAK,+BAAYY,0BAAjB;AACE,4BACKV,KADL;AAEEJ,kBAAQI,MAAMJ,MAAN,CAAaY,GAAb,CAAiB,MAAjB,EAAyBP,OAAOQ,QAAhC;AAFV;;AAKF,WAAK,+BAAYE,2BAAjB;AACE,4BACKX,KADL;AAEEJ,kBAAQI,MAAMJ,MAAN,CAAaY,GAAb,CAAiB,OAAjB,EAA0BP,OAAOQ,QAAjC;AAFV;;AAKF,WAAK,+BAAYG,2BAAjB;AACE,4BACKZ,KADL;AAEEJ,kBAAQI,MAAMJ,MAAN,CAAaY,GAAb,CAAiB,QAAjB,EAA2BP,OAAOQ,QAAlC;AAFV;;AAKF;AACE,eAAOT,KAAP;AA3CJ;AA6CD,G;;;;;kBAGY,IAAIb,iBAAJ,8B","file":"DialogSearchStore.js","sourcesContent":["/*\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\n */\n\nimport { ReduceStore } from 'flux/utils';\nimport { Map } from 'immutable';\nimport Dispatcher from '../dispatcher/ActorAppDispatcher';\nimport { ActionTypes, AsyncActionStates } from '../constants/ActorAppConstants';\n\nclass DialogSearchStore extends ReduceStore {\n  getInitialState() {\n    return {\n      isOpen: false,\n      query: '',\n      filter: new Map({\n        text: true,\n        docs: true,\n        links: true,\n        photos: true\n      }),\n      result: new Map({\n        text: [],\n        docs: [],\n        links: [],\n        photos: []\n      }),\n      status: new Map({\n        text: AsyncActionStates.SUCCESS,\n        docs: AsyncActionStates.SUCCESS,\n        links: AsyncActionStates.SUCCESS,\n        photos: AsyncActionStates.SUCCESS\n      })\n    };\n  }\n\n  reduce(state, action) {\n    switch (action.type) {\n      case ActionTypes.DIALOG_SEARCH_SHOW:\n        return {\n          ...state,\n          isOpen: true\n        };\n\n      case ActionTypes.BIND_DIALOG_PEER:\n      case ActionTypes.DIALOG_SEARCH_HIDE:\n        return this.getInitialState();\n\n      case ActionTypes.DIALOG_SEARCH_CHANGE_QUERY:\n        return {\n          ...state,\n          query: action.query\n        }\n\n      case ActionTypes.DIALOG_SEARCH_TEXT_SUCCESS:\n        return {\n          ...state,\n          result: state.result.set('text', action.response),\n          status: state.result.set('text', AsyncActionStates.SUCCESS)\n        };\n\n      case ActionTypes.DIALOG_SEARCH_DOCS_SUCCESS:\n        return {\n          ...state,\n          result: state.result.set('docs', action.response)\n        };\n\n      case ActionTypes.DIALOG_SEARCH_LINKS_SUCCESS:\n        return {\n          ...state,\n          result: state.result.set('links', action.response)\n        };\n\n      case ActionTypes.DIALOG_SEARCH_PHOTO_SUCCESS:\n        return {\n          ...state,\n          result: state.result.set('photos', action.response)\n        };\n\n      default:\n        return state;\n    }\n  }\n}\n\nexport default new DialogSearchStore(Dispatcher);\n"]}