{"version":3,"sources":["../../../src/components/common/SelectList.react.js"],"names":["SelectContextType","shape","current","number","isRequired","setCurrent","func","SelectList","props","state","bind","handleSelect","handleKeyDown","shouldComponentUpdate","nextProps","nextState","children","max","className","getChildContext","select","pick","componentDidMount","document","addEventListener","componentWillUnmount","removeEventListener","onSelect","handleNext","next","handlePrevious","event","keyCode","ENTER","ARROW_UP","TAB","ARROW_DOWN","stopPropagation","preventDefault","render","setState","childContextTypes","propTypes","string","node"],"mappings":"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","file":"SelectList.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport { KeyCodes } from '../../constants/ActorAppConstants';\n\nexport const SelectContextType = PropTypes.shape({\n  current: PropTypes.number.isRequired,\n  setCurrent: PropTypes.func.isRequired\n});\n\nclass SelectList extends Component {\n  static childContextTypes = {\n    select: SelectContextType\n  };\n\n  static propTypes = {\n    className: PropTypes.string,\n    max: PropTypes.number.isRequired,\n    children: PropTypes.node.isRequired,\n    onSelect: PropTypes.func.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      current: 0\n    };\n\n    this.setCurrent = this.setCurrent.bind(this);\n    this.handleSelect = this.handleSelect.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return nextState.current !== this.state.current ||\n           nextProps.children !== this.props.children ||\n           nextProps.max !== this.props.max ||\n           nextProps.className !== this.props.className;\n  }\n\n  getChildContext() {\n    return {\n      select: {\n        pick: this.handleSelect,\n        current: this.state.current,\n        setCurrent: this.setCurrent\n      }\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener('keydown', this.handleKeyDown, false);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleKeyDown, false);\n  }\n\n  handleSelect() {\n    this.props.onSelect(this.state.current);\n  }\n\n  handleNext() {\n    const next = this.state.current + 1;\n    this.setCurrent(next > this.props.max ? 0 : next);\n  }\n\n  handlePrevious() {\n    const next = this.state.current - 1;\n    this.setCurrent(next < 0 ? this.props.max : next);\n  }\n\n  handleKeyDown(event) {\n    switch (event.keyCode) {\n      case KeyCodes.ENTER:\n        this.handleSelect();\n        break;\n\n      case KeyCodes.ARROW_UP:\n        this.handlePrevious();\n        break;\n\n      case KeyCodes.TAB:\n      case KeyCodes.ARROW_DOWN:\n        this.handleNext();\n        break;\n\n      default:\n        return;\n    }\n\n    event.stopPropagation();\n    event.preventDefault();\n  }\n\n  render() {\n    return (\n      <div className={this.props.className}>\n        {this.props.children}\n      </div>\n    )\n  }\n\n  setCurrent(current) {\n    this.setState({ current });\n  }\n}\n\nexport default SelectList;\n"]}