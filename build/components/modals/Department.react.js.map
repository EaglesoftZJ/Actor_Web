{"version":3,"sources":["../../../src/components/modals/Department.react.js"],"names":["RESULT_ITEM_HEIGHT","scrollIndex","Department","getStores","calculateState","res","getState","dw_data","from","where","orderBy","toArray","bm_data","yh_data","hoverId","selectedDw","selectedBm","selectedYhIndex","szk","selectedDwmc","selectedBmmc","hoverable","scrollTo","props","context","handleClose","bind","handleDialogSelect","handleScroll","componentDidMount","setListeners","componentWillUnmount","cleanListeners","componentDidUpdate","state","setTimeout","scrollTop","$","refs","bms","position","top","setState","listeners","listen","document","handleMouseMove","forEach","listener","remove","hide","peer","peerStr","peerToString","push","dwSelect","dwid","dwmc","event","target","parents","bmSelect","bmid","bmmc","results","renderDw","length","map","result","index","itemId","id","selected","hover","resultClassName","iconClassName","mc","renderBm","renderYh","IGIMID","parseFloat","type","key","xm","zwmc","dwId","szk1","parentId","renderHeader","cursor","handleSelectDw","obj","handleSelectBm","handleItemHover","render","onSelectDw","onSelectBm","onItemHover","scrollBox","contextTypes","intl","object","isRequired","create","pure"],"mappings":"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","file":"Department.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport { findDOMNode } from 'react-dom';\nimport { Container } from 'flux/utils';\nimport { FormattedMessage, FormattedHTMLMessage } from 'react-intl';\nimport EventListener from 'fbjs/lib/EventListener';\nimport fuzzaldrin from 'fuzzaldrin';\nimport Modal from 'react-modal';\nimport classnames from 'classnames';\nimport history from '../../utils/history';\nimport PeerUtils from '../../utils/PeerUtils';\n\nimport { KeyCodes } from '../../constants/ActorAppConstants';\n\nimport DepartmentActionCreators from '../../actions/DepartmentActionCreators';\n\nimport DepartmentStore from '../../stores/DepartmentStore';\n\nimport DepartmentMenu from './departmentMenu/DepartmentMenu.react';\nimport AvatarItem from '../common/AvatarItem.react';\n\nimport linq from 'Linq';\n\nconst RESULT_ITEM_HEIGHT = 44;\nlet scrollIndex = 0;\n\nclass Department extends Component {\n  static getStores() {\n    return [DepartmentStore];\n  }\n\n  static calculateState() {\n    let res = DepartmentStore.getState();\n    return {\n      dw_data: linq.from(res.dw_data).where('$.id!==\"dw017\"').orderBy('$.wzh').toArray(),\n      bm_data: res.bm_data,\n      yh_data: res.yh_data,\n      hoverId: '',\n      selectedDw: '',\n      selectedBm: '',\n      selectedYhIndex: -1,\n      szk: '',\n      selectedDwmc: '',\n      selectedBmmc: '',\n      hoverable: true,\n      scrollTo: null,\n    }\n  }\n\n  static contextTypes = {\n    intl: PropTypes.object.isRequired\n  }\n\n  constructor(props, context) {\n    super(props, context);\n    this.handleClose = this.handleClose.bind(this);\n    this.handleDialogSelect = this.handleDialogSelect.bind(this);\n    this.handleScroll = this.handleScroll.bind(this);\n  }\n\n  componentDidMount() {\n    this.setListeners();\n  }\n\n  componentWillUnmount() {\n    this.cleanListeners();\n  }\n  componentDidUpdate() {\n    this.scrollTo();\n  }\n  scrollTo()  {\n   const { scrollTo } = this.state;\n    if (scrollTo) {\n      setTimeout(() => {\n        var scrollTop = $(this.refs.bms).scrollTop() + $(scrollTo).position().top;\n        $(this.refs.bms).scrollTop(scrollTop);\n        this.setState({scrollTo: null});\n      }, 10);  \n    }\n  }\n\n  setListeners() {\n    this.cleanListeners();\n    this.listeners = [\n      EventListener.listen(document, 'mousemove', this.handleMouseMove.bind(this))\n    ];\n  }\n\n  cleanListeners() {\n    if (this.listeners) {\n      this.listeners.forEach((listener) => listener.remove());\n      this.listeners = null;\n    }\n  }\n  handleMouseMove() {\n    this.setState({'hoverable': true});\n  }\n\n  handleClose() {\n    DepartmentActionCreators.hide();\n  }\n\n\n  handleDialogSelect(peer) {\n    const peerStr = PeerUtils.peerToString(peer);\n    history.push(`/im/${peerStr}`);\n    this.handleClose();\n  }\n\n  dwSelect(dwid, dwmc, szk, event) {\n    const { selectedDw, selectedDwmc } = this.state;\n    var hoverable = false;\n    var scrollTo = $(event.target).parents('li');\n    if (selectedDw === dwid && selectedDwmc === dwmc) {\n      dwid = '';\n      dwmc = '';\n      szk = '';\n      hoverable = true;\n      scrollTo = null;\n    }\n    this.setState({ \n      selectedDw: dwid,\n      selectedDwmc: dwmc, \n      selectedBm: '',\n      selectedBmmc: '',\n      scrollTo,\n      szk,\n      hoverable\n    });\n  }\n\n  bmSelect(bmid, szk, bmmc) {\n    this.setState({ \n      selectedBm: bmid, \n      selectedBmmc: bmmc, \n      selectedYhIndex: -1}\n    );\n  }\n\n  \n  handleScroll(top) {\n    findDOMNode(this.refs.results).scrollTop = top;\n  }\n\n\n  renderDw() {\n    const { dw_data, selectedDw, hoverId, szk, hoverable } = this.state;\n    if (dw_data.length <= 0) {\n      return (\n        <li className=\"results__item results__item--suggestion row\">\n          <FormattedHTMLMessage id=\"modal.department.notFound\" />\n          <button className=\"button button--rised hide\">Create new dialog</button>\n        </li>\n      )\n    }\n\n    return dw_data.map((result, index) => {\n      const itemId = result.id + result.szk;\n      const selected = (selectedDw + szk) === itemId;\n      const hover = hoverId === itemId;\n      const resultClassName = classnames('results__item row', {\n        'results__item--active': hover,\n        'results__item--open': selected\n      });\n      const iconClassName = classnames('material-icons icon', hover ? 'icon--blue' : 'icon--blue');\n\n      return (\n        <li\n          className=\"results__dw\"\n          style={{'position': 'relative'}}\n          key={`r${index}`}>\n          <div className={resultClassName} \n          onClick={(event) => this.dwSelect(result.id, result.mc, result.szk, event)}\n          onMouseOver={() => { hoverable && this.setState({ hoverId: result.id + result.szk })}}>\n            <div className=\"title col-xs\">\n              {result.mc} <i className={ iconClassName }>business</i>\n            </div>\n            <div className=\"arrow\"></div>\n          </div>\n          <div className=\"children-box\">\n          { selected ? this.renderBm(result.id, result.szk, -1) : null }\n          </div>\n        </li>\n      );\n    });\n  }\n\n  renderYh() {\n    const { selectedYhIndex, yh_data, hoverId, selectedBm, selectedDw, szk } = this.state;\n    let results = linq.from(yh_data).where('$.bmid.trim() == \"' + selectedBm + '\" && $.dwid.trim() == \"' + selectedDw + '\"&& $.szk == \"' + szk +'\"').orderBy('$.wzh').toArray();\n    if (results.length <= 0) {\n      return (\n        <li className=\"results__item results__item--suggestion row\">\n          <FormattedHTMLMessage id=\"modal.department.notFound\" />\n          <button className=\"button button--rised hide\">Create new dialog </button>\n        </li>\n      )\n    }\n    return results.map((result, index) => {\n      const resultClassName = classnames('results__item row', {\n        'results__item--active': hoverId === (result.IGIMID + result.szk)\n      });\n\n      return (\n        <li\n          className={resultClassName} key={`r${index}`}\n          onClick={() => this.handleDialogSelect(\n            {\n              id: parseFloat(result.IGIMID),\n              type: 'user',\n              key: 'u' + result.IGIMID\n            }\n          )}\n          onMouseOver={() => this.setState({ hoverId: (result.IGIMID + result.szk) })}>\n          <div className=\"title col-xs\">\n            <div className=\"hint pull-right\"><FormattedMessage id=\"modal.department.openDialog\" /></div>\n            {result.xm}{result.zwmc ? '(' + result.zwmc +')' : ''}\n          </div>\n        </li>\n      );\n    });\n  }\n\n  renderBm(dwId, szk1, parentId) {\n    const { bm_data, selectedBm, hoverId, szk, hoverable } = this.state;\n\n    let results = linq.from(bm_data).where('$.dwid.trim() == \"' + dwId + '\" && $.fid.trim() == \"' + parentId + '\" && $.szk ==' + '\"' + szk1 + '\"').orderBy('$.wzh').toArray();\n    \n    if (results.length <= 0) {\n      return null;\n    }\n    \n\n    return results.map((result, index) => {\n      const itemId = result.id + result.szk;\n      const selected = (selectedBm + szk) === itemId;\n      const hover = hoverId === itemId;\n      const resultClassName = classnames('results__item row', {\n        'results__item--active': hover,\n        'results__item--selected': selected\n      });\n\n      return (\n        <div key={result.id + result.szk} className=\"results__item__bm\">\n          <div\n            className={resultClassName} key={`r${index}`}\n            onClick={() => this.bmSelect(result.id, result.szk, result.mc)}\n            onMouseOver={() => {hoverable && this.setState({ hoverId: result.id + result.szk})}}>\n            <div className=\"title col-xs\">\n              {result.mc}\n            </div>\n          </div>\n          <div className=\"children-box\">\n           {this.renderBm(dwId, szk1, result.id)}\n          </div>\n        </div>\n\n      );\n    });\n\n  }\n\n  renderHeader() {\n    const { selectedDw, selectedDwmc, selectedBmmc } = this.state;\n\n    return (\n      <header className=\"header\">\n        <div className=\"pull-left\"><strong>{selectedDwmc}{selectedDw.length <= 0 ? <FormattedMessage id=\"modal.department.title\" /> : selectedBmmc && '-' + selectedBmmc}</strong></div>\n        <div className=\"pull-right\" style={{cursor: 'Pointer'}}><strong onClick={() => this.handleClose()}>关闭</strong></div>\n      </header>\n    );\n  }\n\n  handleSelectDw(obj) {\n    this.setState({...obj});\n  }\n\n  handleSelectBm(obj) {\n    this.setState({...obj});\n  }\n\n  handleItemHover(hoverId) {\n    this.setState({hoverId});\n  }\n\n \n\n  render() {\n      const { dw_data, bm_data, hoverId} = this.state;\n      var props = {\n        dw_data,\n        bm_data,\n        hoverId,\n        onSelectDw: this.handleSelectDw.bind(this),\n        onSelectBm: this.handleSelectBm.bind(this),\n        onItemHover: this.handleItemHover.bind(this),\n        scrollBox: this.refs.bms\n      }\n      return (\n        <Modal\n          overlayClassName=\"modal-overlay\"\n          className=\"modal\"\n          onRequestClose={this.handleClose}\n          isOpen>\n\n          <div className=\"department\">\n            <div className=\"modal__content\">\n\n              {this.renderHeader()}\n\n              <div className=\"results\">\n                <div className=\"dw_bm_Results\" ref=\"bms\" style={{position: 'relative'}}>\n                  <DepartmentMenu {...props}></DepartmentMenu>\n                </div>\n\n                <div className=\"yhResults\" ref=\"yhs\">\n                  {this.renderYh()}\n                </div>\n              </div>\n\n\n\n            </div>\n          </div>\n\n        </Modal>\n      );\n  }\n}\n\nexport default Container.create(Department, { pure: false });\n"]}