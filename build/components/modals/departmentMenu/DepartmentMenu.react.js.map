{"version":3,"sources":["../../../../src/components/modals/departmentMenu/DepartmentMenu.react.js"],"names":["DepartementItem","props","state","selectedDw","selectedDwmc","selectedBm","selectedBmmc","scrollTo","hoverable","innerHoverId","selectAllId","componentDidMount","setListeners","componentWillUnmount","cleanListeners","componentDidUpdate","listeners","listen","document","handleMouseMove","bind","forEach","listener","remove","setState","scrollBox","setTimeout","scrollTop","position","top","handleShowAll","event","stopPropagation","onShowAll","renderDw","yh_data","bm_data","dw_data","hoverId","_hoverId","undefined","length","list","from","where","toArray","map","result","index","itemId","id","selected","hover","all","resultClassName","dwSelect","mc","handleMouseOver","renderBm","dwId","parentId","results","orderBy","console","log","usersLength","$","bmid","dwid","trim","count","bmSelect","dwmc","onSelectDw","_dwid","_dwmc","_bmid","_bmmc","_hoverable","_scrollTo","fid","target","parents","bmmc","onSelectBm","data","onItemHover","render","PropTypes","array","isRequired","string","func","element"],"mappings":"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","file":"DepartmentMenu.react.js","sourcesContent":["import React, { Component, PropTypes } from 'react';\nimport classnames from 'classnames';\nimport EventListener from 'fbjs/lib/EventListener';\nimport ToolTip from 'rc-tooltip';\nimport { FormattedMessage, FormattedHTMLMessage } from 'react-intl';\nimport $ from 'jquery';\nimport linq from 'Linq';\n\nclass DepartementItem extends Component {\n    static PropTypes = {\n        dw_data: PropTypes.array.isRequired,\n        bm_data: PropTypes.array.isRequired,\n        yh_data: PropTypes.array,\n        hoverId: PropTypes.string,\n        onSelectDw: PropTypes.func,\n        onSelectBm: PropTypes.func,\n        onItemHover: PropTypes.func,\n        onShowAll: PropTypes.func,\n        scrollBox: PropTypes.element\n    }\n    \n\n    constructor(props) {\n        super(props);\n        \n        this.state = {\n            selectedDw: -1,\n            selectedDwmc: '',\n            selectedBm: -1,\n            selectedBmmc: '',\n            scrollTo: null,\n            hoverable: true,\n            innerHoverId: '',\n            selectAllId: ''\n        }\n    }\n    componentDidMount() {\n        this.setListeners();\n    }\n    componentWillUnmount() {\n        this.cleanListeners();\n    }\n    componentDidUpdate() {\n        this.scrollTo();\n    }\n    setListeners() {\n        this.cleanListeners();\n        this.listeners = [\n          EventListener.listen(document, 'mousemove', this.handleMouseMove.bind(this))\n        ];\n    }    \n\n    cleanListeners() {\n        if (this.listeners) {\n          this.listeners.forEach((listener) => listener.remove());\n          this.listeners = null;\n        }\n    }\n    handleMouseMove() {\n        this.setState({'hoverable': true});\n    }\n\n    scrollTo()  {\n        const { scrollTo } = this.state;\n        const { scrollBox } = this.props\n         if (scrollTo) {\n           setTimeout(() => {\n             var scrollTop = $(scrollBox).scrollTop() + $(scrollTo).position().top;\n             $(scrollBox).scrollTop(scrollTop);\n             this.setState({scrollTo: null});\n           }, 10);  \n        }\n    }\n    handleShowAll(selectedDw, selectedDwmc, event) {\n        event.stopPropagation();\n        const { onShowAll } = this.props;\n        this.setState({\n            selectedBm: '', \n            selectedDw: '',\n            selectAllId: selectedDw\n        })\n        onShowAll && onShowAll({selectedDw, selectedDwmc, selectedBm: '', selectedBmmc: ''});\n    }\n\n    renderDw() {\n        const { yh_data, bm_data, dw_data, hoverId, onShowAll } = this.props;\n        const { selectedDw, innerHoverId, selectAllId } = this.state;\n        // console.log('hoverId111', hoverId);\n        var _hoverId = hoverId === undefined ? innerHoverId : hoverId;\n        if (dw_data && dw_data.length <= 0) {\n          return (\n            <li className=\"results__item--suggestion row\">\n              <FormattedHTMLMessage id=\"modal.department.notFound\" />\n              <button className=\"button button--rised hide\">Create new dialog</button>\n            </li>\n          )\n        }\n        const list = linq.from(dw_data).where('$.fid !== \"-1\"').toArray(); // 过滤 单位list根节点 宁波舟山港股份有限公司\n    \n        return list.map((result, index) => {\n          const itemId = result.id;\n          const selected = selectedDw === itemId;\n          const hover = _hoverId === itemId;\n          const all = selectAllId === itemId;\n          const resultClassName = classnames('results__item row', {\n            'results__item--active': hover,\n            'results__item--open': selected,\n            'results__item--all': all\n          });\n        //   const iconClassName = classnames('material-icons icon', hover ? 'icon--blue' : 'icon--blue');\n            // let arr = linq.from(yh_data).where('$.dwid && $.dwid.trim() == \"' + result.id + '\"').toArray();\n            // let size = arr.length;\n            return (\n            <li\n              className=\"results__dw\"\n              style={{'position': 'relative'}}\n              key={`r${index}`}>\n              <div className={resultClassName} \n              onClick={(event) => this.dwSelect(result.id, result.mc, event)}\n              onMouseOver={this.handleMouseOver.bind(this, result.id)}>\n                <div className=\"title col-xs\">\n                    {result.mc}\n                    { onShowAll ? <a href=\"javascript:;\" onClick={ this.handleShowAll.bind(this, result.id, result.mc) } title=\"单位所有人\" className=\"all\" target=\"_self\">全</a> : null }\n                    {/* {result.mc} <i className={ iconClassName }>business</i> */}\n                </div>\n                <div className=\"arrow\"></div>\n              </div>\n              <div className=\"children-box\">\n              { selected ? this.renderBm(result.id, result.id) : null }\n              </div>\n            </li>\n          );\n        });\n      }\n\n    renderBm(dwId, parentId) {\n        const { bm_data, yh_data, hoverId } = this.props;\n        const { selectedBm, selectedDw, innerHoverId} = this.state;\n        var _hoverId = hoverId === undefined ? innerHoverId : hoverId;\n\n        let results = linq.from(bm_data).where('$.dwid && $.dwid.trim() == \"' + dwId + '\" && $.fid.trim() == \"' + parentId + '\"').orderBy('$.wzh').toArray();\n        \n        \n        if (results.length <= 0) {\n            return null;\n        }\n    \n\n        return results.map((result, index) => {\n            const itemId = result.id;\n            const selected = selectedBm === itemId;\n            console.log('selectedBm', selectedBm, itemId);\n            const hover = _hoverId === itemId;\n            const resultClassName = classnames('results__item row', {\n            'results__item--active': hover,\n            'results__item--selected': selected\n            });\n\n            var usersLength =  0;\n            if (yh_data) {\n                usersLength = linq.from(yh_data).where(($) => {\n                  if ($.bmid && $.dwid) {\n                    return $.bmid.trim() == itemId && $.dwid.trim() == selectedDw;\n                  } else {\n                    return false;\n                  }\n                }).count();\n            }\n\n            return (\n                <div key={result.id} className=\"results__bm\">\n                    <div\n                    className={resultClassName} key={`r${index}`}\n                    onClick={() => this.bmSelect(result.id, result.mc)}\n                    onMouseOver={this.handleMouseOver.bind(this, result.id)}>\n                    <div className=\"title col-xs\">\n                        {result.mc} {yh_data ? '(' + usersLength + ')' : null}\n                    </div>\n                    </div>\n                    <div className=\"children-box\">\n                    {this.renderBm(dwId, result.id)}\n                    </div>\n                </div>\n            );\n        });\n    }\n    dwSelect(dwid, dwmc, event) {\n        console.log('title click');\n        const { selectedDw, selectedDwmc } = this.state;\n        const { onSelectDw, bm_data } = this.props;\n        var hoverable = false,\n            _dwid = '',\n            _dwmc = '',\n            _bmid = '',\n            _bmmc = '',\n            _hoverable = true,\n            _scrollTo = null; \n        if (selectedDw !== dwid || selectedDwmc !== dwmc) {\n            console.log('open');\n            var results = linq.from(bm_data).where(($) => {\n              console.log(11111111111, $.fid, dwid, $.fid && $.fid.trim() == dwid);\n              return $.dwid && $.dwid === dwid;\n              // '$.fid && $.fid.trim() == \"' + dwid + '\"'\n            }).orderBy('$.wzh').toArray();\n            console.log('results', results);\n            _dwid = dwid;\n            _dwmc = dwmc;\n            _bmid = results.length > 0 ? results[0].id : '';\n            _bmmc = results.length > 0 ? results[0].mc : '';\n            _hoverable = false;\n            _scrollTo = $(event.target).parents('li');\n        }\n        this.setState({ \n          selectedDw: _dwid,\n          selectedDwmc: _dwmc, \n          selectedBm: _bmid,\n          selectedBmmc: _bmmc,\n          scrollTo: _scrollTo,\n          hoverable: _hoverable,\n          selectAllId: ''\n        });\n        onSelectDw && onSelectDw({\n            selectedDw: _dwid,\n            selectedDwmc: _dwmc, \n            selectedBm: _bmid,\n            selectedBmmc: _bmmc\n        });\n    }\n\n    bmSelect(bmid, bmmc) {\n        const { onSelectBm } = this.props;\n        const { selectedDw, selectedDwmc} = this.state;\n        var data = {\n            selectedBm: bmid, \n            selectedBmmc: bmmc\n        }\n        this.setState({...data, selectAllId: ''});\n        onSelectBm && onSelectBm({selectedDw, selectedDwmc, ...data});\n    }\n\n    handleMouseOver(id) {\n        const { onItemHover } = this.props;\n        const { hoverable } = this.state;\n        var hoverId = id;\n        if (onItemHover === undefined) {\n            this.setState({innerHoverId: hoverId});\n        }\n        hoverable && onItemHover && onItemHover(hoverId);\n    }\n\n    render() {\n        return (\n            <ul className=\"department-menu\">\n                { this.renderDw() }\n            </ul>\n        );\n    }\n}\nexport default DepartementItem;"]}