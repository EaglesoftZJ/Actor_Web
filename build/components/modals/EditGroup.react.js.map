{"version":3,"sources":["../../../src/components/modals/EditGroup.react.js"],"names":["EditGroup","getStores","calculateState","group","getGroup","isAdmin","title","getTitle","about","getAbout","props","handleClose","bind","handleTitleChange","handleAboutChange","handleSave","handleChangeGroupAvatar","handleRemoveGroupPicture","hide","event","setState","target","value","state","editGroupTitle","id","editGroupAbout","croppedImage","changeGroupAvatar","removeGroupAvatar","renderTitle","renderAbout","render","EDIT_GROUP","create","pure"],"mappings":"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","file":"EditGroup.react.js","sourcesContent":["/*\n * Copyright (C) 2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component } from 'react';\nimport { Container } from 'flux/utils';\nimport { FormattedMessage } from 'react-intl';\nimport Modal from 'react-modal';\nimport { ModalTypes } from '../../constants/ActorAppConstants';\n\nimport EditGroupStore from '../../stores/EditGroupStore';\n\nimport EditGroupActionCreators from '../../actions/EditGroupActionCreators';\n\nimport TextField from '../common/TextField.react';\nimport PictureChanger from './profile/PictureChanger.react';\n\nclass EditGroup extends Component {\n  static getStores() {\n    return [EditGroupStore];\n  }\n\n  static calculateState() {\n    return {\n      group: EditGroupStore.getGroup(),\n      isAdmin: EditGroupStore.isAdmin(),\n      title: EditGroupStore.getTitle(),\n      about: EditGroupStore.getAbout()\n    }\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.handleClose = this.handleClose.bind(this);\n    this.handleTitleChange = this.handleTitleChange.bind(this);\n    this.handleAboutChange = this.handleAboutChange.bind(this);\n    this.handleSave = this.handleSave.bind(this);\n    this.handleChangeGroupAvatar = this.handleChangeGroupAvatar.bind(this);\n    this.handleRemoveGroupPicture = this.handleRemoveGroupPicture.bind(this);\n  }\n\n\n  handleClose() {\n    EditGroupActionCreators.hide();\n  }\n\n  handleTitleChange(event) {\n    this.setState({ title: event.target.value });\n  }\n\n  handleAboutChange(event) {\n    this.setState({ about: event.target.value });\n  }\n\n  handleSave() {\n    const { group, title, about, isAdmin } = this.state;\n    EditGroupActionCreators.editGroupTitle(group.id, title);\n    if (isAdmin) {\n      EditGroupActionCreators.editGroupAbout(group.id, about);\n    }\n    this.handleClose();\n  }\n\n  handleChangeGroupAvatar(croppedImage) {\n    const { group } = this.state;\n    EditGroupActionCreators.changeGroupAvatar(group.id, croppedImage);\n  }\n\n  handleRemoveGroupPicture() {\n    const { group } = this.state;\n    EditGroupActionCreators.removeGroupAvatar(group.id);\n  }\n\n  renderTitle() {\n    const { title } = this.state;\n\n    return (\n      <TextField\n        className=\"input__material--wide\"\n        floatingLabel={<FormattedMessage id=\"modal.group.name\"/>}\n        onChange={this.handleTitleChange}\n        ref=\"name\"\n        value={title}/>\n    );\n  }\n\n  renderAbout() {\n    const { isAdmin, about } = this.state;\n    if (!isAdmin) return null;\n\n    return (\n      <div className=\"about\">\n        <label htmlFor=\"about\"><FormattedMessage id=\"modal.group.about\"/></label>\n        <textarea className=\"textarea\" value={about} onChange={this.handleAboutChange} id=\"about\"/>\n      </div>\n    );\n  }\n\n  render() {\n    const { group } = this.state;\n\n    return (\n      <Modal\n        overlayClassName=\"modal-overlay\"\n        className=\"modal\"\n        onRequestClose={this.handleClose}\n        isOpen>\n\n        <div className=\"edit-group\">\n          <div className=\"modal__content\">\n\n            <header className=\"modal__header\">\n              <i className=\"modal__header__icon material-icons\">edit</i>\n              <FormattedMessage id=\"modal.group.title\" tagName=\"h1\"/>\n              <button className=\"button button--lightblue\" onClick={this.handleSave}>\n                <FormattedMessage id=\"button.done\"/>\n              </button>\n            </header>\n\n            <div className=\"modal__body row\">\n              <div className=\"col-xs\">\n                {this.renderTitle()}\n                {this.renderAbout()}\n              </div>\n\n              <PictureChanger {...group}\n                small\n                fromModal={ModalTypes.EDIT_GROUP}\n                onRemove={this.handleRemoveGroupPicture}\n                onChange={this.handleChangeGroupAvatar}/>\n            </div>\n\n          </div>\n        </div>\n\n      </Modal>\n    );\n  }\n}\n\nexport default Container.create(EditGroup, { pure: false });\n"]}