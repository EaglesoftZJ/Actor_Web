{"version":3,"sources":["../../../src/components/modals/EditGroup.react.js"],"names":["EditGroup","getStores","calculateState","group","getGroup","isAdmin","title","getTitle","about","getAbout","props","handleClose","bind","handleTitleChange","handleAboutChange","handleSave","handleChangeGroupAvatar","handleRemoveGroupPicture","hide","event","setState","target","value","state","editGroupTitle","id","editGroupAbout","croppedImage","changeGroupAvatar","removeGroupAvatar","renderTitle","renderAbout","render","EDIT_GROUP","create","pure"],"mappings":"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","file":"EditGroup.react.js","sourcesContent":["/*\r\n * Copyright (C) 2016 Actor LLC. <https://actor.im>\r\n */\r\n\r\nimport React, { Component } from 'react';\r\nimport { Container } from 'flux/utils';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport Modal from 'react-modal';\r\nimport { ModalTypes } from '../../constants/ActorAppConstants';\r\n\r\nimport EditGroupStore from '../../stores/EditGroupStore';\r\n\r\nimport EditGroupActionCreators from '../../actions/EditGroupActionCreators';\r\n\r\nimport TextField from '../common/TextField.react';\r\nimport PictureChanger from './profile/PictureChanger.react';\r\n\r\nclass EditGroup extends Component {\r\n  static getStores() {\r\n    return [EditGroupStore];\r\n  }\r\n\r\n  static calculateState() {\r\n    return {\r\n      group: EditGroupStore.getGroup(),\r\n      isAdmin: EditGroupStore.isAdmin(),\r\n      title: EditGroupStore.getTitle(),\r\n      about: EditGroupStore.getAbout()\r\n    }\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleClose = this.handleClose.bind(this);\r\n    this.handleTitleChange = this.handleTitleChange.bind(this);\r\n    this.handleAboutChange = this.handleAboutChange.bind(this);\r\n    this.handleSave = this.handleSave.bind(this);\r\n    this.handleChangeGroupAvatar = this.handleChangeGroupAvatar.bind(this);\r\n    this.handleRemoveGroupPicture = this.handleRemoveGroupPicture.bind(this);\r\n  }\r\n\r\n\r\n  handleClose() {\r\n    EditGroupActionCreators.hide();\r\n  }\r\n\r\n  handleTitleChange(event) {\r\n    this.setState({ title: event.target.value });\r\n  }\r\n\r\n  handleAboutChange(event) {\r\n    this.setState({ about: event.target.value });\r\n  }\r\n\r\n  handleSave() {\r\n    const { group, title, about, isAdmin } = this.state;\r\n    EditGroupActionCreators.editGroupTitle(group.id, title);\r\n    if (isAdmin) {\r\n      EditGroupActionCreators.editGroupAbout(group.id, about);\r\n    }\r\n    this.handleClose();\r\n  }\r\n\r\n  handleChangeGroupAvatar(croppedImage) {\r\n    const { group } = this.state;\r\n    EditGroupActionCreators.changeGroupAvatar(group.id, croppedImage);\r\n  }\r\n\r\n  handleRemoveGroupPicture() {\r\n    const { group } = this.state;\r\n    EditGroupActionCreators.removeGroupAvatar(group.id);\r\n  }\r\n\r\n  renderTitle() {\r\n    const { title, isAdmin } = this.state;\r\n\r\n    return (\r\n      <TextField\r\n        className=\"input__material--wide\"\r\n        floatingLabel={<FormattedMessage id=\"modal.group.name\"/>}\r\n        onChange={this.handleTitleChange}\r\n        disabled={!isAdmin}\r\n        ref=\"name\"\r\n        value={title}/>\r\n    );\r\n  }\r\n\r\n  renderAbout() {\r\n    const { isAdmin, about } = this.state;\r\n    if (!isAdmin) return null;\r\n\r\n    return (\r\n      <div className=\"about\">\r\n        <label htmlFor=\"about\"><FormattedMessage id=\"modal.group.about\"/></label>\r\n        <textarea className=\"textarea\" value={about} onChange={this.handleAboutChange} id=\"about\"/>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { group } = this.state;\r\n\r\n    return (\r\n      <Modal\r\n        overlayClassName=\"modal-overlay\"\r\n        className=\"modal\"\r\n        onRequestClose={this.handleClose}\r\n        isOpen>\r\n\r\n        <div className=\"edit-group\">\r\n          <div className=\"modal__content\">\r\n\r\n            <header className=\"modal__header\">\r\n              <i className=\"modal__header__icon material-icons\">edit</i>\r\n              <FormattedMessage id=\"modal.group.title\" tagName=\"h1\"/>\r\n              <button className=\"button button--lightblue\" onClick={this.handleSave}>\r\n                <FormattedMessage id=\"button.done\"/>\r\n              </button>\r\n            </header>\r\n\r\n            <div className=\"modal__body row\">\r\n              <div className=\"col-xs\">\r\n                {this.renderTitle()}\r\n                {this.renderAbout()}\r\n              </div>\r\n\r\n              <PictureChanger {...group}\r\n                small\r\n                fromModal={ModalTypes.EDIT_GROUP}\r\n                onRemove={this.handleRemoveGroupPicture}\r\n                onChange={this.handleChangeGroupAvatar}/>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Container.create(EditGroup, { pure: false });\r\n"]}