{"version":3,"sources":["../../../../src/components/modals/attachments/Attachment.react.js"],"names":["Attachment","props","handleChangeSendAsPicture","bind","attachment","sendAsPicture","isOverSize","show","title","type","key","Date","getTime","changeAttachment","renderPreview","isImage","window","URL","createObjectURL","file","renderName","name","renderType","renderSize","size","renderOptions","render","paddingLeft","propTypes","object","isRequired"],"mappings":";;;;AAIA;;;;AACA;;AAEA;;;;AAEA;;;;AACA;;;;;;;;;;+eAVA;;;;IAYMA,U;;;AAKJ,sBAAYC,KAAZ,EAAmB;AAAA;;AAAA,iDACjB,sBAAMA,KAAN,CADiB;;AAGjB,UAAKC,yBAAL,GAAiC,MAAKA,yBAAL,CAA+BC,IAA/B,OAAjC;AAHiB;AAIjB;;uBAEFD,yB,wCAA4B;AAAA,4BACY,KAAKD,KAAL,CAAWG,UADvB;AAAA,QAClBC,aADkB,qBAClBA,aADkB;AAAA,QACHC,UADG,qBACHA,UADG;;AAE1B,QAAIA,UAAJ,EAAgB;AACd,2CAA2BC,IAA3B,CAAgC,EAACC,OAAO,iBAAR,EAA2BC,MAAM,SAAjC,EAA4CC,KAAK,IAAIC,IAAJ,GAAWC,OAAX,EAAjD,EAAhC;AACA;AACD;AACD,wCAA0BC,gBAA1B,CAA2C,CAACR,aAA5C;AACD,G;;uBAEDS,a,4BAAgB;AAAA,QACNV,UADM,GACS,KAAKH,KADd,CACNG,UADM;;AAEd,QAAI,CAACA,WAAWW,OAAhB,EAAyB,OAAO,IAAP;;AAEzB,WACE;AAAA;AAAA,QAAK,WAAU,SAAf;AACE,6CAAK,KAAKC,OAAOC,GAAP,CAAWC,eAAX,CAA2Bd,WAAWe,IAAtC,CAAV;AADF,KADF;AAKD,G;;uBAEDC,U,yBAAa;AAAA,QACHhB,UADG,GACY,KAAKH,KADjB,CACHG,UADG;;;AAGX,WACE;AAAA;AAAA,QAAK,WAAU,yCAAf;AACE;AAAA;AAAA,UAAK,WAAU,yBAAf;AAAyC,qEAAkB,IAAG,wBAArB;AAAzC,OADF;AAEE;AAAA;AAAA,UAAK,WAAU,2BAAf;AAA4CA,mBAAWe,IAAX,CAAgBE;AAA5D;AAFF,KADF;AAMD,G;;uBAEDC,U,yBAAa;AAAA,QACHlB,UADG,GACY,KAAKH,KADjB,CACHG,UADG;;;AAGX,WACE;AAAA;AAAA,QAAK,WAAU,yCAAf;AACE;AAAA;AAAA,UAAK,WAAU,yBAAf;AAAyC,qEAAkB,IAAG,wBAArB;AAAzC,OADF;AAEE;AAAA;AAAA,UAAK,WAAU,2BAAf;AAA4CA,mBAAWe,IAAX,CAAgBV;AAA5D;AAFF,KADF;AAMD,G;;uBAEDc,U,yBAAa;AAAA,QACHnB,UADG,GACY,KAAKH,KADjB,CACHG,UADG;;;AAGX,WACE;AAAA;AAAA,QAAK,WAAU,yCAAf;AACE;AAAA;AAAA,UAAK,WAAU,yBAAf;AAAyC,qEAAkB,IAAG,wBAArB;AAAzC,OADF;AAEE;AAAA;AAAA,UAAK,WAAU,2BAAf;AAA4C,qCAAcA,WAAWe,IAAX,CAAgBK,IAA9B,EAAoC,IAApC;AAA5C;AAFF,KADF;AAMD,G;;uBAEDC,a,4BAAgB;AAAA,QACNrB,UADM,GACS,KAAKH,KADd,CACNG,UADM;;AAEd,QAAI,CAACA,WAAWW,OAAhB,EAAyB,OAAO,IAAP;;AAEzB,WACE;AAAA;AAAA,QAAK,WAAU,mBAAf;AACE;AAAA;AAAA,UAAK,WAAU,0BAAf;AACA,qEAAkB,IAAG,yBAArB;AADA,OADF;AAGE;AAAA;AAAA,UAAK,WAAU,6BAAf;AACE;AAAA;AAAA,YAAO,SAAQ,eAAf,EAA+B,WAAU,cAAzC;AAAwD,uEAAkB,IAAG,iCAArB;AAAxD,SADF;AAEE;AAAA;AAAA,YAAK,WAAU,mBAAf;AACE;AACE,qBAASX,WAAWC,aADtB;AAEE,gBAAG,eAFL;AAGE,sBAAU,KAAKH,yBAHjB;AAIE,kBAAK,UAJP,GADF;AAME,mDAAO,SAAQ,eAAf;AANF;AAFF;AAHF,KADF;AAiBD,G;;uBAEDwB,M,qBAAS;AACP,WACE;AAAA;AAAA,QAAK,WAAU,gBAAf;AAEE;AAAA;AAAA,UAAK,WAAU,8BAAf;AACG,aAAKZ,aAAL;AADH,OAFF;AAME;AAAA;AAAA,UAAK,WAAU,UAAf,EAA0B,OAAO,EAAEa,aAAa,EAAf,EAAjC;AAEG,aAAKP,UAAL,EAFH;AAIE;AAAA;AAAA,YAAK,WAAU,KAAf;AACE;AAAA;AAAA,cAAK,WAAU,QAAf;AACG,iBAAKE,UAAL;AADH,WADF;AAIE;AAAA;AAAA,cAAK,WAAU,QAAf;AACG,iBAAKC,UAAL;AADH;AAJF,SAJF;AAaG,aAAKE,aAAL;AAbH;AANF,KADF;AAyBD,G;;;;;AAjHGzB,U,CACG4B,S,GAAY;AACjBxB,cAAY,iBAAUyB,MAAV,CAAiBC;AADZ,C;kBAmHN9B,U","file":"Attachment.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport humanFileSize from '../../../utils/humanFileSize';\n\nimport AttachmentsActionCreators from '../../../actions/AttachmentsActionCreators';\nimport MessageAlertActionCreators from '../../../actions/MessageAlertActionCreators';\n\nclass Attachment extends Component {\n  static propTypes = {\n    attachment: PropTypes.object.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n    \n    this.handleChangeSendAsPicture = this.handleChangeSendAsPicture.bind(this);\n   }\n\n  handleChangeSendAsPicture() {\n    const { sendAsPicture, isOverSize } = this.props.attachment;\n    if (isOverSize) {\n      MessageAlertActionCreators.show({title: '文件过大,不支持以图片形式发送', type: 'warning', key: new Date().getTime()});\n      return;\n    }\n    AttachmentsActionCreators.changeAttachment(!sendAsPicture);\n  }\n\n  renderPreview() {\n    const { attachment } = this.props;\n    if (!attachment.isImage) return null;\n\n    return (\n      <div className=\"wrapper\">\n        <img src={window.URL.createObjectURL(attachment.file)}/>\n      </div>\n    );\n  }\n\n  renderName() {\n    const { attachment } = this.props;\n\n    return (\n      <div className=\"attachment__meta attachment__meta--name\">\n        <div className=\"attachment__meta__title\"><FormattedMessage id=\"modal.attachments.name\"/></div>\n        <div className=\"attachment__meta__content\">{attachment.file.name}</div>\n      </div>\n    );\n  }\n\n  renderType() {\n    const { attachment } = this.props;\n\n    return (\n      <div className=\"attachment__meta attachment__meta--type\">\n        <div className=\"attachment__meta__title\"><FormattedMessage id=\"modal.attachments.type\"/></div>\n        <div className=\"attachment__meta__content\">{attachment.file.type}</div>\n      </div>\n    );\n  }\n\n  renderSize() {\n    const { attachment } = this.props;\n\n    return (\n      <div className=\"attachment__meta attachment__meta--size\">\n        <div className=\"attachment__meta__title\"><FormattedMessage id=\"modal.attachments.size\"/></div>\n        <div className=\"attachment__meta__content\">{humanFileSize(attachment.file.size, true)}</div>\n      </div>\n    );\n  }\n\n  renderOptions() {\n    const { attachment } = this.props;\n    if (!attachment.isImage) return null;\n\n    return (\n      <div className=\"attachment__extra\">\n        <div className=\"attachment__extra__title\">\n        <FormattedMessage id=\"modal.attachments.extra\"/></div>\n        <div className=\"attachment__extra__switcher\">\n          <label htmlFor=\"sendAsPicture\" className=\"switch-label\"><FormattedMessage id=\"modal.attachments.sendAsPicture\"/></label>\n          <div className=\"switch pull-right\">\n            <input\n              checked={attachment.sendAsPicture}\n              id=\"sendAsPicture\"\n              onChange={this.handleChangeSendAsPicture}\n              type=\"checkbox\"/>\n            <label htmlFor=\"sendAsPicture\"/>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div className=\"attachment row\">\n\n        <div className=\"attachment__preview col-xs-5\">\n          {this.renderPreview()}\n        </div>\n\n        <div className=\"col-xs-7\" style={{ paddingLeft: 16 }}>\n\n          {this.renderName()}\n\n          <div className=\"row\">\n            <div className=\"col-xs\">\n              {this.renderType()}\n            </div>\n            <div className=\"col-xs\">\n              {this.renderSize()}\n            </div>\n          </div>\n\n          {this.renderOptions()}\n\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Attachment;\n"]}