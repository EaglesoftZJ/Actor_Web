{"version":3,"sources":["../../../src/components/search/DialogSearch.react.js"],"names":["DialogSearch","props","handleCancel","bind","handleKeyDown","handleQueryChange","shouldComponentUpdate","nextProps","isOpen","query","componentDidUpdate","prevProps","setCaretToEnd","onCancel","event","keyCode","ESC","preventDefault","onChange","target","value","renderContent","render","focus","input","refs","selectionStart","selectionEnd","length","propTypes","bool","isRequired","string","func"],"mappings":";;;;AAIA;;;;AACA;;;;;;;;+eALA;;;;IAOMA,Y;;;AAQJ,wBAAYC,KAAZ,EAAmB;AAAA;;AAAA,iDACjB,sBAAMA,KAAN,CADiB;;AAGjB,UAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBC,IAAlB,OAApB;AACA,UAAKC,aAAL,GAAqB,MAAKA,aAAL,CAAmBD,IAAnB,OAArB;AACA,UAAKE,iBAAL,GAAyB,MAAKA,iBAAL,CAAuBF,IAAvB,OAAzB;AALiB;AAMlB;;yBAEDG,qB,kCAAsBC,S,EAAW;AAC/B,WAAOA,UAAUC,MAAV,KAAqB,KAAKP,KAAL,CAAWO,MAAhC,IACAD,UAAUE,KAAV,KAAoB,KAAKR,KAAL,CAAWQ,KADtC;AAED,G;;yBAEDC,kB,+BAAmBC,S,EAAW;AAC5B,QAAI,KAAKV,KAAL,CAAWO,MAAX,IAAqB,CAACG,UAAUH,MAApC,EAA4C;AAC1C,WAAKI,aAAL;AACD;AACF,G;;yBAEDV,Y,2BAAe;AACb,SAAKD,KAAL,CAAWY,QAAX;AACD,G;;yBAEDT,a,0BAAcU,K,EAAO;AACnB,QAAIA,MAAMC,OAAN,KAAkB,4BAASC,GAA/B,EAAoC;AAClCF,YAAMG,cAAN;AACA,WAAKf,YAAL;AACD;AACF,G;;yBAEDG,iB,8BAAkBS,K,EAAO;AACvB,SAAKb,KAAL,CAAWiB,QAAX,CAAoBJ,MAAMK,MAAN,CAAaC,KAAjC;AACD,G;;yBAEDC,a,4BAAgB;AAAA,QACNZ,KADM,GACI,KAAKR,KADT,CACNQ,KADM;;;AAGd,WACE;AAAA;AAAA,QAAK,WAAU,oBAAf;AACE;AACE,mBAAU,uBADZ;AAEE,cAAK,QAFP;AAGE,aAAI,OAHN;AAIE,qBAAY,gCAJd;AAKE,eAAOA,KALT;AAME,kBAAU,KAAKJ,iBANjB;AAOE,mBAAW,KAAKD;AAPlB,QADF;AAUE;AAAA;AAAA,UAAK,WAAU,0BAAf;AACE;AAAA;AAAA,YAAG,WAAU,wCAAb,EAAsD,SAAS,KAAKF,YAApE;AAAA;AAAA;AADF;AAVF,KADF;AAkBD,G;;yBAEDoB,M,qBAAS;AAAA,QACCd,MADD,GACY,KAAKP,KADjB,CACCO,MADD;;;AAGP,WACE;AAAA;AAAA,QAAK,WAAU,2BAAf;AACGA,eAAS,KAAKa,aAAL,EAAT,GAAgC;AADnC,KADF;AAKD,G;;yBAEDE,K,oBAAQ;AAAA,QACEC,KADF,GACY,KAAKC,IADjB,CACED,KADF;;AAEN,QAAIA,KAAJ,EAAW;AACTA,YAAMD,KAAN;AACD;AACF,G;;yBAEDX,a,4BAAgB;AAAA,QACNY,KADM,GACI,KAAKC,IADT,CACND,KADM;;AAEd,QAAIA,KAAJ,EAAW;AACTA,YAAMD,KAAN;AACAC,YAAME,cAAN,GAAuBF,MAAMG,YAAN,GAAqBH,MAAMJ,KAAN,CAAYQ,MAAxD;AACD;AACF,G;;;;;AAxFG5B,Y,CACG6B,S,GAAY;AACjBrB,UAAQ,iBAAUsB,IAAV,CAAeC,UADN;AAEjBtB,SAAO,iBAAUuB,MAAV,CAAiBD,UAFP;AAGjBlB,YAAU,iBAAUoB,IAAV,CAAeF,UAHR;AAIjBb,YAAU,iBAAUe,IAAV,CAAeF;AAJR,C;kBA0FN/B,Y","file":"DialogSearch.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport { KeyCodes } from '../../constants/ActorAppConstants';\n\nclass DialogSearch extends Component {\n  static propTypes = {\n    isOpen: PropTypes.bool.isRequired,\n    query: PropTypes.string.isRequired,\n    onCancel: PropTypes.func.isRequired,\n    onChange: PropTypes.func.isRequired\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.handleQueryChange = this.handleQueryChange.bind(this);\n  }\n\n  shouldComponentUpdate(nextProps) {\n    return nextProps.isOpen !== this.props.isOpen ||\n           nextProps.query !== this.props.query;\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.isOpen && !prevProps.isOpen) {\n      this.setCaretToEnd();\n    }\n  }\n\n  handleCancel() {\n    this.props.onCancel();\n  }\n\n  handleKeyDown(event) {\n    if (event.keyCode === KeyCodes.ESC) {\n      event.preventDefault();\n      this.handleCancel();\n    }\n  }\n\n  handleQueryChange(event) {\n    this.props.onChange(event.target.value);\n  }\n\n  renderContent() {\n    const { query } = this.props;\n\n    return (\n      <div className=\"dialog__search row\">\n        <input\n          className=\"dialog__search__input\"\n          type=\"search\"\n          ref=\"input\"\n          placeholder=\"Search messages in this dialog\"\n          value={query}\n          onChange={this.handleQueryChange}\n          onKeyDown={this.handleKeyDown}\n        />\n        <div className=\"dialog__search__controls\">\n          <a className=\"dialog__search__cancel link link--blue\" onClick={this.handleCancel}>\n            Cancel\n          </a>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const { isOpen } = this.props;\n\n    return (\n      <div className=\"dialog__search__container\">\n        {isOpen ? this.renderContent() : null}\n      </div>\n    );\n  }\n\n  focus() {\n    const { input } = this.refs;\n    if (input) {\n      input.focus();\n    }\n  }\n\n  setCaretToEnd() {\n    const { input } = this.refs;\n    if (input) {\n      input.focus();\n      input.selectionStart = input.selectionEnd = input.value.length;\n    }\n  }\n}\n\nexport default DialogSearch;\n"]}