{"version":3,"sources":["../../../src/components/sidebar/DepartmentButton.react.js"],"names":["QuickSearchButton","getStores","calculateState","show","getState","department_show","props","openQuickSearch","bind","handleKeyDown","componentDidMount","setListeners","componentWillUnmount","cleanListeners","listeners","listen","document","forEach","listener","remove","event","keyCode","K","metaKey","stopPropagation","preventDefault","push","render","state","console","log","className","selected","create"],"mappings":";;;;AAIA;;;;AACA;;;;AACA;;AACA;;AACA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;;;;;;;+eAbA;;;;IAeMA,iB;;;oBACGC,S,wBAAY;AACjB,WAAO,2BAAP;AACD,G;;oBACMC,c,6BAAiB;AACtB,WAAO;AACLC,YAAM,0BAAgBC,QAAhB,GAA2BC;AAD5B,KAAP;AAGD,G;;AACD,6BAAYC,KAAZ,EAAmB;AAAA;;AAAA,iDACjB,sBAAMA,KAAN,CADiB;;AAGjB,UAAKC,eAAL,GAAuB,MAAKA,eAAL,CAAqBC,IAArB,OAAvB;AACA,UAAKC,aAAL,GAAqB,MAAKA,aAAL,CAAmBD,IAAnB,OAArB;AAJiB;AAKlB;;8BAEDE,iB,gCAAoB;AAClB,SAAKC,YAAL;AACD,G;;8BAEDC,oB,mCAAuB;AACrB,SAAKC,cAAL;AACD,G;;8BAEDF,Y,2BAAe;AACb,SAAKE,cAAL;AACA,SAAKC,SAAL,GAAiB,CACf,wBAAcC,MAAd,CAAqBC,QAArB,EAA+B,SAA/B,EAA0C,KAAKP,aAA/C,CADe,CAAjB;AAGD,G;;8BAEDI,c,6BAAiB;AACf,QAAI,KAAKC,SAAT,EAAoB;AAClB,WAAKA,SAAL,CAAeG,OAAf,CAAuB,UAACC,QAAD;AAAA,eAAcA,SAASC,MAAT,EAAd;AAAA,OAAvB;AACA,WAAKL,SAAL,GAAiB,IAAjB;AACD;AACF,G;;8BAEDL,a,0BAAcW,K,EAAO;AACnB,QAAIA,MAAMC,OAAN,KAAkB,4BAASC,CAA3B,IAAgCF,MAAMG,OAA1C,EAAmD;AACjDH,YAAMI,eAAN;AACAJ,YAAMK,cAAN;AACA,WAAKlB,eAAL;AACD;AACF,G;;8BAEDA,e,8BAAkB;AAChB;AACA,sBAAQmB,IAAR,CAAa,gBAAb;AACD,G;;8BAEDC,M,qBAAS;AAAA,QACCxB,IADD,GACU,KAAKyB,KADf,CACCzB,IADD;;AAEP0B,YAAQC,GAAR,CAAY,MAAZ,EAAoB3B,IAApB;AACA,QAAI4B,YAAY,0BAAW,EAACC,UAAU7B,IAAX,EAAX,CAAhB;AACA,WACE;AAAA;AAAA,QAAQ,WAAU,qBAAlB;AACE;AAAA;AAAA;AACE,qBAAU,KADZ;AAEE,2BAAiB,IAFnB;AAGE,2BAAiB,CAHnB;AAIE,mBAAS,6DAAkB,IAAG,oBAArB,GAJX;AAKE;AAAA;AAAA,YAAG,SAAS,KAAKI,eAAjB,EAAkC,WAAWwB,SAA7C;AACE;AAAA;AAAA,cAAK,WAAU,aAAf;AAA6B;AAAA;AAAA,gBAAG,WAAU,gBAAb;AAAA;AAAA;AAA7B,WADF;AAEE,uEAAkB,IAAG,mBAArB;AAFF;AALF;AADF,KADF;AAcD,G;;;;;kBAGY,iBAAUE,MAAV,CAAiBjC,iBAAjB,C","file":"DepartmentButton.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport { Container } from 'flux/utils';\nimport { FormattedMessage } from 'react-intl';\nimport Tooltip from 'rc-tooltip';\nimport EventListener from 'fbjs/lib/EventListener';\nimport { KeyCodes } from '../../constants/ActorAppConstants';\nimport DepartmentActionCreators from '../../actions/DepartmentActionCreators';\nimport DepartmentStore from '../../stores/DepartmentStore';\nimport history from '../../utils/history';\n\nclass QuickSearchButton extends Component {\n  static getStores() {\n    return [DepartmentStore];\n  }\n  static calculateState() {\n    return {\n      show: DepartmentStore.getState().department_show\n    }\n  }\n  constructor(props) {\n    super(props);\n\n    this.openQuickSearch = this.openQuickSearch.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n  }\n\n  componentDidMount() {\n    this.setListeners();\n  }\n\n  componentWillUnmount() {\n    this.cleanListeners();\n  }\n\n  setListeners() {\n    this.cleanListeners();\n    this.listeners = [\n      EventListener.listen(document, 'keydown', this.handleKeyDown)\n    ];\n  }\n\n  cleanListeners() {\n    if (this.listeners) {\n      this.listeners.forEach((listener) => listener.remove());\n      this.listeners = null;\n    }\n  }\n\n  handleKeyDown(event) {\n    if (event.keyCode === KeyCodes.K && event.metaKey) {\n      event.stopPropagation();\n      event.preventDefault();\n      this.openQuickSearch()\n    }\n  }\n\n  openQuickSearch() {\n    // DepartmentActionCreators.show();\n    history.push('/im/department');\n  }\n\n  render() {\n    const { show } = this.state;\n    console.log('show', show);\n    var className = classNames({selected: show});\n    return (\n      <footer className=\"sidebar__department\">\n        <Tooltip\n          placement=\"top\"\n          mouseEnterDelay={0.15}\n          mouseLeaveDelay={0}\n          overlay={<FormattedMessage id=\"tooltip.department\"/>}>\n          <a onClick={this.openQuickSearch} className={className}>\n            <div className=\"icon-holder\"><i className=\"material-icons\">search</i></div>\n            <FormattedMessage id=\"button.department\"/>\n          </a>\n        </Tooltip>\n      </footer>\n    )\n  }\n}\n\nexport default Container.create(QuickSearchButton);\n"]}