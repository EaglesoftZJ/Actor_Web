{"version":3,"sources":["../../../../src/components/dialog/messages/Text.react.js"],"names":["processText","text","processedText","exp","replace","str","url","test","Text","render","props","className","__html","propTypes","string","isRequired"],"mappings":";;;;AAIA;;;;AACA;;;;AAEA;;;;;;;;+eAPA;;;;AASA,SAASA,WAAT,CAAqBC,IAArB,EAA2B;AACzB,MAAIC,gBAAgBD,IAApB;AACA;AACA;AACA,MAAIE,MAAM,+JAAV;AACAD,kBAAgBA,cAAcE,OAAd,CAAsBD,GAAtB,EAA2B,UAACE,GAAD,EAAS;AAClD,QAAIC,MAAM,QAAQC,IAAR,CAAaF,GAAb,IAAoBA,GAApB,GAA0B,YAAYA,GAAhD;AACA,yCAAmCC,GAAnC,4DAA6FD,GAA7F;AACD,GAHe,CAAhB;AAIAH,kBAAgB,kCAAiBA,aAAjB,CAAhB;AACAA,kBAAgBA,cAAcE,OAAd,CAAsB,yBAAtB,EAAiD,0CAAjD,CAAhB;;AAEA,SAAOF,aAAP;AACD;;IAEKM,I;;;;;;;;;iBAMJC,M,qBAAS;AAAA,iBACqB,KAAKC,KAD1B;AAAA,QACCT,IADD,UACCA,IADD;AAAA,QACOU,SADP,UACOA,SADP;;;AAGP,WACE;AAAA;AAAA,QAAK,WAAWA,SAAhB;AACE,6CAAK,WAAU,MAAf,EAAsB,yBAAyB,EAAEC,QAAQZ,YAAYC,IAAZ,CAAV,EAA/C;AADF,KADF;AAKD,G;;;;;AAdGO,I,CACGK,S,GAAY;AACjBZ,QAAM,iBAAUa,MAAV,CAAiBC,UADN;AAEjBJ,aAAW,iBAAUG;AAFJ,C;kBAgBNN,I","file":"Text.react.js","sourcesContent":["/*\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component, PropTypes } from 'react';\nimport ActorClient from '../../../utils/ActorClient';\n\nimport { processEmojiText } from '../../../utils/EmojiUtils';\n\nfunction processText(text) {\n  let processedText = text;\n  // processedText = ActorClient.renderMarkdown(processedText);\n  // 链接匹配\n  var exp = /(((^https?:(?:\\/\\/)?)(?:[-;:&=\\+\\$,\\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\\+\\$,\\w]+@)[A-Za-z0-9.-]+)((?:\\/[\\+~%\\/.\\w-_]*)?\\??(?:[-\\+=&;%@.\\w_]*)#?(?:[\\w]*))?)$/g\n  processedText = processedText.replace(exp, (str) => {\n    var url = /^http/.test(str) ? str : 'http://' + str;\n    return `<a target=\"_blank\" href=\"${url}\" onClick=\"window.messenger.handleLinkClick(event)\">${str}</a>`;\n  });\n  processedText = processEmojiText(processedText);\n  processedText = processedText.replace(/(@[0-9a-zA-Z_]{5,32})/ig, '<span class=\"message__mention\">$1</span>');\n\n  return processedText;\n}\n\nclass Text extends Component {\n  static propTypes = {\n    text: PropTypes.string.isRequired,\n    className: PropTypes.string\n  };\n\n  render() {\n    const { text, className } = this.props;\n\n    return (\n      <div className={className}>\n        <div className=\"text\" dangerouslySetInnerHTML={{ __html: processText(text) }}/>\n      </div>\n    );\n  }\n}\n\nexport default Text;\n"]}