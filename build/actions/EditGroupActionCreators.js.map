{"version":3,"sources":["../../src/actions/EditGroupActionCreators.js"],"names":["EditGroupActionCreators","show","gid","setBindings","bindGroup","onCurrentGroupChange","group","getGroup","GROUP_EDIT_MODAL_SHOW","toggleAutoFocus","hide","removeBindings","GROUP_EDIT_MODAL_HIDE","GROUP_INFO_CHANGED","editGroupTitle","title","getTitle","request","GROUP_EDIT_TITLE","success","GROUP_EDIT_TITLE_SUCCESS","failure","GROUP_EDIT_TITLE_ERROR","changeGroupAvatar","avatar","editGroupAbout","about","getAbout","GROUP_EDIT_ABOUT","GROUP_EDIT_ABOUT_SUCCESS","GROUP_EDIT_ABOUT_ERROR","removeGroupAvatar"],"mappings":";;;;AAIA;;AACA;;AACA;;;;AAEA;;;;AAEA;;;;AACA;;;;;;;;;;+eAXA;;;;IAcMA,uB;;;;;;;;;oCACJC,I,iBAAKC,G,EAAK;AACR,SAAKC,WAAL,CAAiB,OAAjB,EAA0B,CACxB,sBAAYC,SAAZ,CAAsBF,GAAtB,EAA2B,KAAKG,oBAAhC,CADwB,CAA1B;;AAIA,QAAMC,QAAQ,sBAAYC,QAAZ,CAAqBL,GAArB,CAAd;AACA,sCAAS,+BAAYM,qBAArB,EAA4C,EAAEF,YAAF,EAA5C;;AAEA,oCAAsBG,eAAtB,CAAsC,KAAtC;AACD,G;;oCAEDC,I,mBAAO;AACL,SAAKC,cAAL,CAAoB,OAApB;;AAEA,sCAAS,+BAAYC,qBAArB;;AAEA,oCAAsBH,eAAtB,CAAsC,IAAtC;AACD,G;;oCAEDJ,oB,iCAAqBC,K,EAAO;AAC1B,sCAAS,+BAAYO,kBAArB,EAAyC,EAAEP,YAAF,EAAzC;AACD,G;;oCAEDQ,c,2BAAeZ,G,EAAKa,K,EAAO;AACzB,QAAIA,UAAU,yBAAeC,QAAf,EAAd,EAAyC;AACvC,6CAAc,sBAAYF,cAAZ,CAA2BZ,GAA3B,EAAgCa,KAAhC,CAAd,EAAsD;AACpDE,iBAAS,+BAAYC,gBAD+B;AAEpDC,iBAAS,+BAAYC,wBAF+B;AAGpDC,iBAAS,+BAAYC;AAH+B,OAAtD,EAIG,EAAEpB,QAAF,EAAOa,YAAP,EAJH;AAKD;AACF,G;;oCAEDQ,iB,8BAAkBrB,G,EAAKsB,M,EAAQ;AAC7B,0BAAYD,iBAAZ,CAA8BrB,GAA9B,EAAmCsB,MAAnC;AACD,G;;oCAEDC,c,2BAAevB,G,EAAKwB,K,EAAO;AACzBA,YAAQA,UAAU,EAAV,GAAe,IAAf,GAAsBA,KAA9B;AACA,QAAIA,UAAU,yBAAeC,QAAf,EAAd,EAAyC;AACvC,6CAAc,sBAAYF,cAAZ,CAA2BvB,GAA3B,EAAgCwB,KAAhC,CAAd,EAAsD;AACpDT,iBAAS,+BAAYW,gBAD+B;AAEpDT,iBAAS,+BAAYU,wBAF+B;AAGpDR,iBAAS,+BAAYS;AAH+B,OAAtD,EAIG,EAAE5B,QAAF,EAAOwB,YAAP,EAJH;AAKD;AACF,G;;oCAEDK,iB,8BAAkB7B,G,EAAK;AACrB,0BAAY6B,iBAAZ,CAA8B7B,GAA9B;AACD,G;;;;;kBAGY,IAAIF,uBAAJ,E","file":"EditGroupActionCreators.js","sourcesContent":["/*\r\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\r\n */\r\n\r\nimport { dispatch, dispatchAsync } from '../dispatcher/ActorAppDispatcher';\r\nimport { ActionTypes } from '../constants/ActorAppConstants';\r\nimport ActorClient from '../utils/ActorClient';\r\n\r\nimport EditGroupStore from '../stores/EditGroupStore'\r\n\r\nimport ActionCreators from './ActionCreators';\r\nimport ComposeActionCreators from './ComposeActionCreators';\r\n\r\n\r\nclass EditGroupActionCreators extends ActionCreators {\r\n  show(gid) {\r\n    this.setBindings('group', [\r\n      ActorClient.bindGroup(gid, this.onCurrentGroupChange)\r\n    ]);\r\n\r\n    const group = ActorClient.getGroup(gid);\r\n    dispatch(ActionTypes.GROUP_EDIT_MODAL_SHOW, { group });\r\n\r\n    ComposeActionCreators.toggleAutoFocus(false);\r\n  }\r\n\r\n  hide() {\r\n    this.removeBindings('group');\r\n\r\n    dispatch(ActionTypes.GROUP_EDIT_MODAL_HIDE);\r\n\r\n    ComposeActionCreators.toggleAutoFocus(true);\r\n  }\r\n\r\n  onCurrentGroupChange(group) {\r\n    dispatch(ActionTypes.GROUP_INFO_CHANGED, { group })\r\n  }\r\n\r\n  editGroupTitle(gid, title) {\r\n    if (title !== EditGroupStore.getTitle()) {\r\n      dispatchAsync(ActorClient.editGroupTitle(gid, title), {\r\n        request: ActionTypes.GROUP_EDIT_TITLE,\r\n        success: ActionTypes.GROUP_EDIT_TITLE_SUCCESS,\r\n        failure: ActionTypes.GROUP_EDIT_TITLE_ERROR\r\n      }, { gid, title });\r\n    }\r\n  }\r\n\r\n  changeGroupAvatar(gid, avatar) {\r\n    ActorClient.changeGroupAvatar(gid, avatar)\r\n  }\r\n\r\n  editGroupAbout(gid, about) {\r\n    about = about === '' ? null : about;\r\n    if (about !== EditGroupStore.getAbout()) {\r\n      dispatchAsync(ActorClient.editGroupAbout(gid, about), {\r\n        request: ActionTypes.GROUP_EDIT_ABOUT,\r\n        success: ActionTypes.GROUP_EDIT_ABOUT_SUCCESS,\r\n        failure: ActionTypes.GROUP_EDIT_ABOUT_ERROR\r\n      }, { gid, about });\r\n    }\r\n  }\r\n\r\n  removeGroupAvatar(gid) {\r\n    ActorClient.removeGroupAvatar(gid)\r\n  }\r\n}\r\n\r\nexport default new EditGroupActionCreators();\r\n"]}