{"version":3,"sources":["../../src/actions/InviteUserActions.js"],"names":["show","group","INVITE_USER_MODAL_SHOW","toggleAutoFocus","hide","INVITE_USER_MODAL_HIDE","setGroupSearch","search","NVITE_USER_SET_SEARCH","setSelectedUserIds","selectedUserIds","NVITE_USER_SET_MEMBERS","inviteUser","gid","idList","invite","index","inviteMember","parseFloat","request","INVITE_USER","success","INVITE_USER_SUCCESS","failure","INVITE_USER_ERROR","uid","then","state","length"],"mappings":";;;;AAIA;;AACA;;AACA;;;;AACA;;;;AACA;;;;;;kBAEe;AACbA,MADa,gBACRC,KADQ,EACD;AACV,sCAAS,+BAAYC,sBAArB,EAA6C,EAAED,YAAF,EAA7C;AACA,oCAAsBE,eAAtB,CAAsC,KAAtC;AACD,GAJY;AAMbC,MANa,kBAMN;AACL,sCAAS,+BAAYC,sBAArB;AACA,oCAAsBF,eAAtB,CAAsC,IAAtC;AACD,GATY;AAWbG,gBAXa,0BAWEC,MAXF,EAWU;AACrB,sCAAS,+BAAYC,qBAArB,EAA4C,EAAED,cAAF,EAA5C;AACD,GAbY;AAebE,oBAfa,8BAeMC,eAfN,EAeuB;AAClC,sCAAS,+BAAYC,sBAArB,EAA6C,EAAED,gCAAF,EAA7C;AACD,GAjBY;AAoBbE,YApBa,sBAoBFC,GApBE,EAoBGC,MApBH,EAoBW;AAAA;;AACtB,+BAAQ,MAAR;AACA,QAAIC,SAAS,SAATA,MAAS,CAACC,KAAD,EAAW;AACtB,6CAAc,sBAAYC,YAAZ,CAAyBJ,GAAzB,EAA8BK,WAAWJ,OAAOE,KAAP,CAAX,CAA9B,CAAd,EAAwE;AACtEG,iBAAS,+BAAYC,WADiD;AAEtEC,iBAAS,+BAAYC,mBAFiD;AAGtEC,iBAAS,+BAAYC;AAHiD,OAAxE,EAIG,EAAEX,QAAF,EAAOY,KAAKX,OAAOE,KAAP,CAAZ,EAJH,EAIgCU,IAJhC,CAIqC,UAACC,KAAD,EAAW;AAC9CX;AACA;AACA,YAAIA,SAASF,OAAOc,MAApB,EAA4B;AAC1B,gBAAKxB,IAAL;AACA,qCAAQ,MAAR;AACA;AACD;AACDW,eAAOC,KAAP;AACD,OAbD;AAcA;AACD,KAhBD;AAiBAD,WAAO,CAAP;AACD;AAxCY,C,EAVf","file":"InviteUserActions.js","sourcesContent":["/*\r\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\r\n */\r\n\r\nimport { dispatch, dispatchAsync } from '../dispatcher/ActorAppDispatcher';\r\nimport { ActionTypes } from '../constants/ActorAppConstants';\r\nimport ActorClient from '../utils/ActorClient';\r\nimport loading from '../utils/DataLoading';\r\nimport ComposeActionCreators from '../actions/ComposeActionCreators';\r\n\r\nexport default {\r\n  show(group) {\r\n    dispatch(ActionTypes.INVITE_USER_MODAL_SHOW, { group });\r\n    ComposeActionCreators.toggleAutoFocus(false);\r\n  },\r\n\r\n  hide() {\r\n    dispatch(ActionTypes.INVITE_USER_MODAL_HIDE);\r\n    ComposeActionCreators.toggleAutoFocus(true);\r\n  },\r\n\r\n  setGroupSearch(search) {\r\n    dispatch(ActionTypes.NVITE_USER_SET_SEARCH, { search });\r\n  },\r\n\r\n  setSelectedUserIds(selectedUserIds) {\r\n    dispatch(ActionTypes.NVITE_USER_SET_MEMBERS, { selectedUserIds });\r\n  },\r\n\r\n\r\n  inviteUser(gid, idList) {\r\n    loading('show');\r\n    var invite = (index) => {\r\n      dispatchAsync(ActorClient.inviteMember(gid, parseFloat(idList[index])), {\r\n        request: ActionTypes.INVITE_USER,\r\n        success: ActionTypes.INVITE_USER_SUCCESS,\r\n        failure: ActionTypes.INVITE_USER_ERROR\r\n      }, { gid, uid: idList[index] }).then((state) => {\r\n        index++;\r\n        // loading('info', index, idList.length);\r\n        if (index >= idList.length) {\r\n          this.hide();\r\n          loading('hide');\r\n          return;\r\n        } \r\n        invite(index);\r\n      });\r\n      return;\r\n    }\r\n    invite(0);\r\n  }\r\n};\r\n"]}