{"version":3,"sources":["../../src/actions/InviteUserActions.js"],"names":["show","group","INVITE_USER_MODAL_SHOW","toggleAutoFocus","hide","INVITE_USER_MODAL_HIDE","setGroupSearch","search","NVITE_USER_SET_SEARCH","setSelectedUserIds","selectedUserIds","NVITE_USER_SET_MEMBERS","inviteUser","gid","idList","invite","index","inviteMember","parseFloat","request","INVITE_USER","success","INVITE_USER_SUCCESS","failure","INVITE_USER_ERROR","uid","then","state","length"],"mappings":";;;;AAIA;;AACA;;AACA;;;;AACA;;;;AACA;;;;;;kBAEe;AACbA,MADa,gBACRC,KADQ,EACD;AACV,sCAAS,+BAAYC,sBAArB,EAA6C,EAAED,YAAF,EAA7C;AACA,oCAAsBE,eAAtB,CAAsC,KAAtC;AACD,GAJY;AAMbC,MANa,kBAMN;AACL,sCAAS,+BAAYC,sBAArB;AACA,oCAAsBF,eAAtB,CAAsC,IAAtC;AACD,GATY;AAWbG,gBAXa,0BAWEC,MAXF,EAWU;AACrB,sCAAS,+BAAYC,qBAArB,EAA4C,EAAED,cAAF,EAA5C;AACD,GAbY;AAebE,oBAfa,8BAeMC,eAfN,EAeuB;AAClC,sCAAS,+BAAYC,sBAArB,EAA6C,EAAED,gCAAF,EAA7C;AACD,GAjBY;AAoBbE,YApBa,sBAoBFC,GApBE,EAoBGC,MApBH,EAoBW;AAAA;;AACtB,+BAAQ,MAAR;AACA,QAAIC,SAAS,SAATA,MAAS,CAACC,KAAD,EAAW;AACtB,6CAAc,sBAAYC,YAAZ,CAAyBJ,GAAzB,EAA8BK,WAAWJ,OAAOE,KAAP,CAAX,CAA9B,CAAd,EAAwE;AACtEG,iBAAS,+BAAYC,WADiD;AAEtEC,iBAAS,+BAAYC,mBAFiD;AAGtEC,iBAAS,+BAAYC;AAHiD,OAAxE,EAIG,EAAEX,QAAF,EAAOY,KAAKX,OAAOE,KAAP,CAAZ,EAJH,EAIgCU,IAJhC,CAIqC,UAACC,KAAD,EAAW;AAC9CX;AACA;AACA,YAAIA,SAASF,OAAOc,MAApB,EAA4B;AAC1B,gBAAKxB,IAAL;AACA,qCAAQ,MAAR;AACA;AACD;AACDW,eAAOC,KAAP;AACD,OAbD;AAcA;AACD,KAhBD;AAiBAD,WAAO,CAAP;AACD;AAxCY,C,EAVf","file":"InviteUserActions.js","sourcesContent":["/*\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\n */\n\nimport { dispatch, dispatchAsync } from '../dispatcher/ActorAppDispatcher';\nimport { ActionTypes } from '../constants/ActorAppConstants';\nimport ActorClient from '../utils/ActorClient';\nimport loading from '../utils/DataLoading';\nimport ComposeActionCreators from '../actions/ComposeActionCreators';\n\nexport default {\n  show(group) {\n    dispatch(ActionTypes.INVITE_USER_MODAL_SHOW, { group });\n    ComposeActionCreators.toggleAutoFocus(false);\n  },\n\n  hide() {\n    dispatch(ActionTypes.INVITE_USER_MODAL_HIDE);\n    ComposeActionCreators.toggleAutoFocus(true);\n  },\n\n  setGroupSearch(search) {\n    dispatch(ActionTypes.NVITE_USER_SET_SEARCH, { search });\n  },\n\n  setSelectedUserIds(selectedUserIds) {\n    dispatch(ActionTypes.NVITE_USER_SET_MEMBERS, { selectedUserIds });\n  },\n\n\n  inviteUser(gid, idList) {\n    loading('show');\n    var invite = (index) => {\n      dispatchAsync(ActorClient.inviteMember(gid, parseFloat(idList[index])), {\n        request: ActionTypes.INVITE_USER,\n        success: ActionTypes.INVITE_USER_SUCCESS,\n        failure: ActionTypes.INVITE_USER_ERROR\n      }, { gid, uid: idList[index] }).then((state) => {\n        index++;\n        // loading('info', index, idList.length);\n        if (index >= idList.length) {\n          this.hide();\n          loading('hide');\n          return;\n        } \n        invite(index);\n      });\n      return;\n    }\n    invite(0);\n  }\n};\n"]}