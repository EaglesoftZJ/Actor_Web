{"version":3,"sources":["../../src/actions/PingyinSearchActionCreators.js"],"names":["show","DEPARTMENT_SHOW","toggleAutoFocus","hide","DEPARTMENT_HIDE","setPingyinSearchList","list","obj","item","peerInfo","title","letterStore","make","pingYing","pingyin","letter","substring","toLowerCase","indexOf","push","key","test","sort","a","b","PINGYIN_SEARCH_CHANGED"],"mappings":";;;;AAIA;;AACA;;AACA;;;;AACA;;;;;;AAPA;;;;kBASe;AACbA,MADa,kBACN;AACL,sCAAS,+BAAYC,eAArB;AACA,oCAAsBC,eAAtB,CAAsC,KAAtC;AACD,GAJY;AAMbC,MANa,kBAMN;AACL,sCAAS,+BAAYC,eAArB;AACA,oCAAsBF,eAAtB,CAAsC,IAAtC;AACD,GATY;AAWbG,sBAXa,gCAWQC,IAXR,EAWc;AACzB,QAAIC,MAAM,EAAV;AACA,yBAAiBD,IAAjB,kHAAuB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,UAAdE,IAAc;;AACrB,UAAI,CAACA,KAAKC,QAAL,CAAcC,KAAnB,EAA0B;AAC1B,UAAIC,cAAc,EAAlB;AACA,4BAAoB,iBAAOC,IAAP,CAAYC,QAAZ,CAAqBL,KAAKC,QAAL,CAAcC,KAAnC,CAApB,yHAA+D;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,YAAtDI,OAAsD;;AAC7D,YAAIC,SAASD,QAAQE,SAAR,CAAkB,CAAlB,EAAqB,CAArB,EAAwBC,WAAxB,EAAb;AACA;AACA,YAAIN,YAAYO,OAAZ,CAAoBH,MAApB,MAAgC,CAAC,CAArC,EAAwC;AACtC;AACD,SAFD,MAEO;AACLJ,sBAAYQ,IAAZ,CAAiBJ,MAAjB;AACD;AACD,YAAIK,OAAM,EAAV;AACAA,eAAM,QAAQC,IAAR,CAAaN,MAAb,IAAuBA,MAAvB,GAAgC,IAAtC;AACA,YAAI,CAACR,IAAIa,IAAJ,CAAL,EAAe;AACbb,cAAIa,IAAJ,IAAW,EAAX;AACD;AACD;AACAb,YAAIa,IAAJ,EAASD,IAAT,CAAcX,IAAd;AACD;AACF;AACD,SAAK,IAAIY,GAAT,IAAgBb,GAAhB,EAAqB;AACnBA,UAAIa,GAAJ,EAASE,IAAT,CAAc,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACtB,YAAID,EAAEd,QAAF,CAAWC,KAAX,GAAmBc,EAAEf,QAAF,CAAWC,KAAlC,EAAyC;AACvC,iBAAO,CAAP;AACD,SAFD,MAEO,IAAIa,EAAEd,QAAF,CAAWC,KAAX,GAAmBc,EAAEf,QAAF,CAAWC,KAAlC,EAAyC;AAC9C,iBAAO,CAAP;AACD,SAFM,MAEA;AACL,iBAAO,CAAC,CAAR;AACD;AACF,OARD;AASD;AACD,sCAAS,+BAAYe,sBAArB,EAA6C,EAAElB,QAAF,EAA7C;AACD;AA7CY,C","file":"PingyinSearchActionCreators.js","sourcesContent":["/*\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\n */\n\nimport { dispatch } from '../dispatcher/ActorAppDispatcher';\nimport { ActionTypes } from '../constants/ActorAppConstants';\nimport ComposeActionCreators from '../actions/ComposeActionCreators';\nimport makepy from 'makepy';\n\nexport default {\n  show() {\n    dispatch(ActionTypes.DEPARTMENT_SHOW);\n    ComposeActionCreators.toggleAutoFocus(false);\n  },\n\n  hide() {\n    dispatch(ActionTypes.DEPARTMENT_HIDE);\n    ComposeActionCreators.toggleAutoFocus(true);\n  },\n  \n  setPingyinSearchList(list) {\n    let obj = {};\n    for (let item of list) {\n      if (!item.peerInfo.title) continue;\n      let letterStore = [];\n      for (let pingyin of makepy.make.pingYing(item.peerInfo.title)) {\n        let letter = pingyin.substring(0, 1).toLowerCase();\n        // console.log(letterStore, 111);\n        if (letterStore.indexOf(letter) !== -1) {\n          continue;\n        } else {\n          letterStore.push(letter);\n        }\n        let key = '';\n        key = /[a-z]/.test(letter) ? letter : '其他';\n        if (!obj[key]) {\n          obj[key] = [];\n        }\n        // console.log(obj[key], 111111111);\n        obj[key].push(item);\n      }\n    }\n    for (let key in obj) {\n      obj[key].sort((a, b) => {\n        if (a.peerInfo.title > b.peerInfo.title) {\n          return 1;\n        } else if (a.peerInfo.title > b.peerInfo.title) {\n          return 0;\n        } else {\n          return -1;\n        }\n      })\n    }\n    dispatch(ActionTypes.PINGYIN_SEARCH_CHANGED, { obj });\n  }\n};\n"]}