{"version":3,"sources":["../../src/actions/DialogInfoActionCreators.js"],"names":["DialogInfoActionCreators","setDialogInfo","info","DIALOG_INFO_CHANGED","peer","getCurrentPeer","type","GROUP","loadMembers","id","then","data","members","length"],"mappings":";;;;AAIA;;AACA;;AAEA;;;;AAEA;;;;;;AATA;;;;AAWA,IAAMA,2BAA2B;AAC/BC,eAD+B,yBACjBC,IADiB,EACX;AAClB,sCAAS,+BAAYC,mBAArB,EAA0C,EAAED,UAAF,EAA1C;;AAIA,QAAIE,OAAO,sBAAYC,cAAZ,EAAX;AACA,QAAID,QAAQA,KAAKE,IAAL,KAAc,6BAAUC,KAApC,EAA2C;AACzC,4BAAYC,WAAZ,CAAwBN,KAAKO,EAA7B,EAAiC,KAAjC,EAAwC,IAAxC,EAA8CC,IAA9C,CAAmD,UAACC,IAAD,EAAU;AAC3D,YAAGT,KAAKU,OAAL,IAAgBV,KAAKU,OAAL,CAAaC,MAAb,GAAsB,CAAzC,EAA4C;AAC1CX,eAAKU,OAAL,GAAeD,KAAKC,OAApB;AACA,4CAAS,+BAAYT,mBAArB,EAA0C,EAAED,UAAF,EAA1C;AACD;AACF,OALD;AAMD;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD;AAjC8B,CAAjC;;kBAoCeF,wB","file":"DialogInfoActionCreators.js","sourcesContent":["/*\r\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\r\n */\r\n\r\nimport { dispatch } from '../dispatcher/ActorAppDispatcher';\r\nimport { ActionTypes, PeerTypes } from '../constants/ActorAppConstants';\r\n\r\nimport ActorClient from '../utils/ActorClient';\r\n\r\nimport DialogStore from '../stores/DialogStore';\r\n\r\nconst DialogInfoActionCreators = {\r\n  setDialogInfo(info) {\r\n    dispatch(ActionTypes.DIALOG_INFO_CHANGED, { info });\r\n\r\n\r\n\r\n    var peer = DialogStore.getCurrentPeer();\r\n    if (peer && peer.type === PeerTypes.GROUP) {\r\n      ActorClient.loadMembers(info.id, 10000, null).then((data) => {\r\n        if(info.members && info.members.length > 0) {\r\n          info.members = data.members;\r\n          dispatch(ActionTypes.DIALOG_INFO_CHANGED, { info });\r\n        }  \r\n      });\r\n    }\r\n\r\n\r\n    // function loadMembers(gid, size, next, members) {\r\n    //   if (next && next.length === 0) {\r\n    //     info.members = members;\r\n    //     dispatch(ActionTypes.DIALOG_INFO_CHANGED, { info });\r\n    //     return;\r\n    //   } else {\r\n    //     ActorClient.loadMembers(gid, size, next).then((data) => {\r\n    //       if (data.next.length >= 2 && data.next[1] < 0) {\r\n    //         data.next[1] = 256 + data.next[1];\r\n    //         data.next = data.next.splice(0, 2);\r\n    //       }\r\n    //       loadMembers(gid, size, data.next, members.concat(data.members));\r\n    //     })\r\n    //   }\r\n    //   return;    \r\n    // }\r\n  }\r\n};\r\n\r\nexport default DialogInfoActionCreators;\r\n"]}